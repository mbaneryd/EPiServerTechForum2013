//>>built
define("epi/shell/command/builder/MenuBuilder",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/on","dijit/Menu","dijit/MenuItem","dijit/CheckedMenuItem","dijit/PopupMenuItem","epi/shell/command/builder/_Builder","epi/shell/command/_CommandModelBindingMixin"],function(_1,_2,_3,on,_4,_5,_6,_7,_8,_9){return _2([_8],{_menuItemClass:_2([_5,_9]),_checkedMenuItemClass:_2([_6,_9]),_popupMenuItemClass:_2([_7,_9]),_create:function(_a){var _b=typeof _a.active=="boolean",_c=_3.isArray(_a.options),_d="popup" in _a,_e=_b?this._checkedMenuItemClass:(_c||_d)?this._popupMenuItemClass:this._menuItemClass,_f=_3.mixin({model:_a},this.itemSettings);var _10=new _e(_f);if(_d){if(_a.popupClass){_a.set("popup",new _a.popupClass({category:_a.popupCategory}));}_10.popup=_a.popup;}if(_c){this._createOptionMenu(_a,_10);}return _10;},_createOptionMenu:function(_11,_12){_12.popup=new _4();_1.forEach(_11.options,function(_13){var _14=new _6({label:_13.label,checked:_11.selected===_13.value});_14.own(on(_14,"click",function(e){_11.set("selected",_13.value);}));_14.own(_11.watch("selected",function(_15,_16,_17){if(_17!==_13.value){_14.set("checked",false);}}));_12.popup.addChild(_14);});}});});