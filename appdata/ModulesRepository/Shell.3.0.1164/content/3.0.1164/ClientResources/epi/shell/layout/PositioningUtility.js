//>>built
define("epi/shell/layout/PositioningUtility",["dojo","epi"],function(_1,_2){return _1.declare(null,{_margin:10,constructor:function(){},place:function(_3,_4){var _5=this._getNode(_3);var _6=this.findPosition(_5,_4);_1.style(_5,{position:"absolute",top:_6.y+"px",left:_6.x+"px"});},findPosition:function(_7,_8){var _9=this._getNode(_7);var _a=this._getPosition(_9);var _b=_1.window.getBox();if(_8.padding){_a.w+=_8.padding.w;_a.h+=_8.padding.h;}var _c=this._getNode(_8.snapTo);var _d=this._getPosition(_8.snapTo);var _e=_8.frame||{x:0,y:0,w:_b.w,h:_b.h};if(_8.frame==null&&_9!=null&&_c!=null){var _f="defaultView" in _c.ownerDocument?_c.ownerDocument.defaultView:_c.ownerDocument.parentWindow;var _10="defaultView" in _9.ownerDocument?_9.ownerDocument.defaultView:_9.ownerDocument.parentWindow;_e=this._getFramePosition(_f,_10);}_d=this._getVisiblePosition(_d,_e);return this._executeTransformers(_a,_d,_b)||this._fallbackTransformer(_a,_d,_b);},_getVisiblePosition:function(_11,_12){var _13=_1.clone(_11);if(_12.w>0&&_13.x+_13.w>_12.w){_13.w=_12.w-_13.x;}if(_12.h>0&&_13.y+_13.h>_12.h){_13.h=_12.h-_13.y;}_13.x+=_12.x;_13.y+=_12.y;if(_13.y<_12.y){_13.h=_13.h-_12.y+_13.y;_13.y=_12.y;}if(_13.x<_12.x){_13.w=_13.w-_12.x+_13.x;_13.x=_12.x;}return _13;},_getFramePosition:function(_14,_15){if(_14.parent!==_14){var _16=_14.parent.document.getElementsByTagName("iframe");for(var i in _16){if(_16[i].contentWindow===_14){var _17=_1.position(_16[i]);if(_14.parent===_15){return _17;}var _18=this._getFramePosition(_14.parent,_15);return {x:_17.x+_18.x,y:_17.y+_18.y,w:_17.w,h:_17.h};}}}return {x:0,y:0,w:0,h:0};},_executeTransformers:function(pos,_19,_1a){for(var i in this._transformers){var _1b=this._transformers[i].call(this,pos,_19,_1a);_1b=this._moveIntoViewport(_1b,_1a);if(this._isInside(_1b,_1a)&&this._isOutside(_1b,_19)){return _1b;}}return null;},_getNode:function(_1c){if(typeof _1c==="string"){return _1.byId(_1c);}var _1d=_1c;if(_1d&&_1d.domNode){return _1d.domNode;}return _1d;},_getPosition:function(_1e){if(typeof _1e=="undefined"||_1e===null){return {x:0,y:0,w:0,h:0};}var pos=_1e;if(typeof pos.x!=="undefined"&&typeof pos.y!=="undefined"){return pos;}var _1f=this._getNode(_1e);if(!_1f){return {x:0,y:0,w:0,h:0};}return _1.position(_1f,false);},_moveIntoViewport:function(_20,_21){return {x:Math.min(_21.w-_20.w-this._margin,Math.max(this._margin,_20.x)),y:Math.min(_21.h-_20.h-this._margin,Math.max(this._margin,_20.y)),w:_20.w,h:_20.h};},_isInside:function(_22,_23){return _22.x>0&&_22.y>0&&_22.x+_22.w<_23.w&&_22.y+_22.h<_23.h;},_isOutside:function(_24,_25){return _24.x>_25.x+_25.w||_24.y>_25.y+_25.h||_24.x+_24.w<_25.x||_24.y+_24.h<_25.y;},_transformers:[function(_26,_27,_28){return {x:_27.x+_27.w+this._margin,y:_27.y,w:_26.w,h:_26.h};},function(_29,_2a,_2b){return {x:_2a.x+(_2a.w/2-_29.w/2),y:_2a.y+_2a.h+this._margin,w:_29.w,h:_29.h};},function(_2c,_2d,_2e){return {x:_2d.x-_2c.w-this._margin,y:_2d.y,w:_2c.w,h:_2c.h};},function(_2f,_30,_31){return {x:_30.x+(_30.w/2-_2f.w/2),y:_30.y-_2f.h-this._margin,w:_2f.w,h:_2f.h};}],_fallbackTransformer:function(_32,_33,_34){return {x:(_34.w-_32.w-this._margin),y:10};}});});