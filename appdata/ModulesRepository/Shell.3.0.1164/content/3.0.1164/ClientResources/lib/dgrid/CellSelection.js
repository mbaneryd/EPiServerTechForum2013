//>>built
define("dgrid/CellSelection",["dojo/_base/declare","dojo/aspect","dojo/on","dojo/has","./Selection","put-selector/put"],function(_1,_2,_3,_4,_5,_6){return _1(_5,{selectionDelegate:".dgrid-cell",select:function(_7,_8,_9){var i,id;if(_9===undefined){_9=true;}if(typeof _7!="object"||!("element" in _7)){_7=this.cell(_7);}else{if(!_7.row){if(_9&&typeof _9==="object"){for(id in _9){this.select(this.cell(_7.id,id),null,_9[id]);}}else{for(id in this.columns){this.select(this.cell(_7.id,id),null,_9);}}return;}}if(this.allowSelect(_7)){var _a=this.selection,_b=_7.row.id,_c=_a[_b];if(!_7.column){for(i in this.columns){this.select(this.cell(_b,i),null,_9);}return;}var _d=_c&&_c[_7.column.id];if(_9===null){_9=!_d;}var _e=_7.element;_c=_c||{};_c[_7.column.id]=_9;this.selection[_b]=_c;var _f=false;for(i in _c){if(_c[i]===true){_f=true;break;}}if(!_f){delete this.selection[_b];}if(_e){if(_9){_6(_e,".dgrid-selected.ui-state-active");}else{_6(_e,"!dgrid-selected!ui-state-active");}}if(_9!=_d&&_e){this._selectionEventQueue(_9,"cells").push(_7);}if(_8){if(!_8.element){_8=this.cell(_8);}var _10=_8.element;var _11=_7.element;var _12=(_10&&(_10.compareDocumentPosition?_10.compareDocumentPosition(_11)==2:_10.sourceIndex>_11.sourceIndex))?"nextSibling":"previousSibling";var _13=_7.column.id,_14=_8.column.id,_15,_16=[];for(id in this.columns){if(_15){_16.push(id);}if(id==_13&&(_13=_16)||id==_14&&(_14=_16)){_16.push(id);if(_15||(_13==_16&&id==_14)){break;}_15=true;}}var row=_7.row,_17=row.element;_10=_8.row.element;do{for(i=0;i<_16.length;i++){_7=this.cell(_17,_16[i]);this.select(_7,null,_9);}if(_17==_10){break;}}while((_17=_7.row.element[_12]));}}},isSelected:function(_18,_19){if(typeof _18==="undefined"||_18===null){return false;}if(!_18.element){_18=this.cell(_18,_19);}var _1a=_18.row.id;if(_1a in this.selection){return !!this.selection[_1a][_18.column.id];}else{return this.allSelected&&(!_18.row.data||this.allowSelect(_18));}},clearSelection:function(_1b){_1b=false;this.inherited(arguments);}});});