(function(){tinymce.create("tinymce.plugins.Save",{init:function(ed){var t=this;t.editor=ed,ed.addCommand("mceSave",t._save,t),ed.addCommand("mceCancel",t._cancel,t),ed.addButton("save",{title:"save.save_desc",cmd:"mceSave"}),ed.addButton("cancel",{title:"save.cancel_desc",cmd:"mceCancel"}),ed.onNodeChange.add(t._nodeChange,t),ed.addShortcut("ctrl+s",ed.getLang("save.save_desc"),"mceSave")},getInfo:function(){return{longname:"Save",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/save",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(ed,cm){var ed=this.editor;ed.getParam("save_enablewhendirty")&&(cm.setDisabled("save",!ed.isDirty()),cm.setDisabled("cancel",!ed.isDirty()))},_save:function(){var formObj,os,ed=this.editor;return formObj=tinymce.DOM.get(ed.id).form||tinymce.DOM.getParent(ed.id,"form"),!ed.getParam("save_enablewhendirty")||ed.isDirty()?(tinyMCE.triggerSave(),(os=ed.getParam("save_onsavecallback"))?(ed.execCallback("save_onsavecallback",ed)&&(ed.startContent=tinymce.trim(ed.getContent({format:"raw"})),ed.nodeChanged()),void 0):(formObj?(ed.isNotDirty=!0,(null==formObj.onsubmit||0!=formObj.onsubmit())&&formObj.submit(),ed.nodeChanged()):ed.windowManager.alert("Error: No form element found."),void 0)):void 0},_cancel:function(){var os,ed=this.editor,h=tinymce.trim(ed.startContent);return(os=ed.getParam("save_oncancelcallback"))?(ed.execCallback("save_oncancelcallback",ed),void 0):(ed.setContent(h),ed.undoManager.clear(),ed.nodeChanged(),void 0)}}),tinymce.PluginManager.add("save",tinymce.plugins.Save)})();