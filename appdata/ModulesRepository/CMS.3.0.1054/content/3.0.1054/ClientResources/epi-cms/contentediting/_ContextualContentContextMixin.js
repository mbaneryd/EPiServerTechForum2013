//>>built
define("epi-cms/contentediting/_ContextualContentContextMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/when","epi/shell/_ContextMixin","epi/shell/TypeDescriptorManager","epi-cms/ApplicationSettings","epi-cms/contentediting/PseudoContextualCommandDecorator","epi-cms/core/ContentReference","epi/i18n!epi/cms/nls/episerver.cms.widget.hierachicallist.roots"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _2([_5],{contextRootLabel:null,_commandDecorator:null,postscript:function(){this.inherited(arguments);this.contextRootLabel=this.contextRootLabel||_a.contextualroot.label;this._commandDecorator=this._commandDecorator||new _8();},destroy:function(){this._commandDecorator&&this._commandDecorator.destroy();this.inherited(arguments);},isTypeOfRoot:function(_b){var _c=this.inherited(arguments),_d=this.isContextualContent(_b);return _c!=null?!!(_c||_d):!!(_b&&_d);},isContextualContent:function(_e){return this.isContextualRoot(_e)||this.isPseudoContextualRoot(_e);},isContextualRoot:function(_f){return _f.parentLink==this._getPseudoContextualContent();},isPseudoContextualRoot:function(_10){var _11=_9.toContentReference(_10.contentLink);return !_11.providerName&&_11.id==this._getPseudoContextualContent();},hasContextual:function(_12){if(!(_12 instanceof Array)||_12.length<=0){return false;}return _1.some(_12,this.isContextualContent,this);},canHaveContextualContent:function(_13){var _14=_9.toContentReference(_13.contentLink);return !_1.some(this.notSupportContextualContents,function(id){return !_14.providerName&&_14.id==id;});},getContextualRoot:function(_15){if(typeof _15!=="object"){return null;}var _16=_3.clone(_15);_16.name=this.getContextualRootName(_16);if(this.isPseudoContextualRoot(_16)){_16.hasChildren=false;}return _16;},getContextualRootName:function(_17){var _18=this.contextRootLabel||(this._currentContext&&this._currentContext.name)||"",_19=_17&&_17.ownerTypeIdentifier,_1a=_6.getResourceValue(_19||(this._currentContext&&this._currentContext.dataType)||"","name",true);return _1a?_3.replace(_18,[_1a]):_18;},decoratePseudoContextualCommands:function(_1b){_4(this.getCurrentContent(),_3.hitch(this,function(_1c){this._commandDecorator.decorateCommands(_1b,_1c,_3.hitch(this,this.isPseudoContextualRoot));}));},_getPseudoContextualContent:function(){return _7.contentAssetsFolder;}});});