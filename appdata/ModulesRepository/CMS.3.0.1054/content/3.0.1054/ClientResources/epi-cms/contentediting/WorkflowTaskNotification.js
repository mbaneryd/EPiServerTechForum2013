//>>built
define("epi-cms/contentediting/WorkflowTaskNotification",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/topic","dojox/html/entities","epi/datetime","epi/string","epi-cms/contentediting/_ContentEditingNotification","epi-cms/contentediting/command/WorkflowTask","epi/i18n!epi/ui/nls/personalization.task"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _2([_8],{_contentData:null,taskStatus:["statusnotstarted","statusinprogress","statuscompleted","statusrejected"],constructor:function(){this._storeName="epi.cms.workflowtask";this.inherited(arguments);},_executeAction:function(_b){this._contentData=_b;return this._store.query({id:_b.contentLink});},_onExecuteSuccess:function(_c){var _d=[];_1.forEach(_c,function(_e){_d.push({content:_7.toHTML(this._renderMessage(_e)),commands:[new _9({model:{contentData:this._contentData,task:_e}})]});},this);this._setNotification(_d);if(!_c||_c.length===0){_4.publish("/epi/cms/action/refreshmytasks");}},_renderMessage:function(_f){var _10="";_10+=_f.subject&&_f.subject.length>0?_5.encode(_f.subject):"-";_10+=_f.dueDate?_3.replace(", {0} {1}",[_a.duedate.toLowerCase(),_6.toUserFriendlyString(_f.dueDate)]):"";_10+=", "+_a[this.taskStatus[_f.status]];return _10;}});});