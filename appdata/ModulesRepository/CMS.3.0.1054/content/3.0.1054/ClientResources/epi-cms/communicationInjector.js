(function(e){var n="epi::",i={},t=[];function o(e,n,i,t){var o=!!t;e.addEventListener(n,i,o);return{remove:function(){e.removeEventListener(n,i,o);e=null}}}function u(e,n){top.postMessage({id:e,message:n},"*")}function f(e,t){var o=n+e;i[o]?i[o].push(t):i[o]=[t];return{remove:function(){var e,n=i[o];if(n){while((e=n.indexOf(t))!==-1){n.splice(e,1)}}t=o=null}}}function s(e){var n;function i(){n.remove();n=null;e&&e()}if(self.document.readyState==="complete"){e&&e()}else{n=o(self.document,"DOMContentLoaded",i)}}function d(){t.forEach(function(e){e.remove()});i=t=null}function c(){var e,n;function i(){if(e){if(document.body.lastChild===e){return}e.parentNode.removeChild(e);e=null}document.body.insertAdjacentHTML("beforeend","<div id='epi-bodysize' style='position: absolute; padding: 0; margin: 0;height: 0; width: 100%;'></div>");e=document.getElementById("epi-bodysize")}function o(){var t,o;i();t=e.offsetWidth;o=e.offsetTop;if(!n||n.w!=t||n.h!=o){n={h:o,w:t};u("/site/resize",n)}}t.push(f("/site/checksize",o))}function r(){function e(e){var t,o=e.data;try{if(o){t=i[n+o.id];t&&t.forEach(function(e){e(o.data)})}}catch(u){}}t.push(o(self,"message",e))}function a(){e.publish=u;e.subscribe=f}s(function(){r();c();a();t.push(o(self,"unload",function(){u("/site/unload",{});d()}));u("/site/load",{url:self.location.href})})})(window.epi=window.epi||{});