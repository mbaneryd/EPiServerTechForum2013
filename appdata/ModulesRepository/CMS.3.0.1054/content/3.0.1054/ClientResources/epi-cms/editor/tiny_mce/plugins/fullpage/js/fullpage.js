(function(){function setVal(id,value){var elm=document.getElementById(id);elm&&(value=value||"","SELECT"==elm.nodeName?selectByValue(document.forms[0],id,value):"checkbox"==elm.type?elm.checked=!!value:elm.value=value)}function getVal(id){var elm=document.getElementById(id);return"SELECT"==elm.nodeName?elm.options[elm.selectedIndex].value:"checkbox"==elm.type?elm.checked:elm.value}function init(){var i,item,list,form=document.forms[0],editor=tinyMCEPopup.editor;for(list=editor.getParam("fullpage_doctypes",defaultDocTypes).split(","),i=0;list.length>i;i++)item=list[i].split("="),item.length>1&&addSelectValue(form,"doctype",item[0],item[1]);for(list=editor.getParam("fullpage_fonts",defaultFontNames).split(";"),i=0;list.length>i;i++)item=list[i].split("="),item.length>1&&addSelectValue(form,"fontface",item[0],item[1]);for(list=editor.getParam("fullpage_fontsizes",defaultFontSizes).split(","),i=0;list.length>i;i++)addSelectValue(form,"fontsize",list[i],list[i]);for(list=editor.getParam("fullpage_encodings",defaultEncodings).split(","),i=0;list.length>i;i++)item=list[i].split("="),item.length>1&&addSelectValue(form,"docencoding",item[0],item[1]);document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor"),document.getElementById("link_color_pickcontainer").innerHTML=getColorPickerHTML("link_color_pick","link_color"),document.getElementById("visited_color_pickcontainer").innerHTML=getColorPickerHTML("visited_color_pick","visited_color"),document.getElementById("active_color_pickcontainer").innerHTML=getColorPickerHTML("active_color_pick","active_color"),document.getElementById("textcolor_pickcontainer").innerHTML=getColorPickerHTML("textcolor_pick","textcolor"),document.getElementById("stylesheet_browsercontainer").innerHTML=getBrowserHTML("stylesheetbrowser","stylesheet","file","fullpage"),document.getElementById("bgimage_pickcontainer").innerHTML=getBrowserHTML("bgimage_browser","bgimage","image","fullpage"),isVisible("stylesheetbrowser")&&(document.getElementById("stylesheet").style.width="220px"),isVisible("link_href_browser")&&(document.getElementById("element_link_href").style.width="230px"),isVisible("bgimage_browser")&&(document.getElementById("bgimage").style.width="210px"),tinymce.each(tinyMCEPopup.getWindowArg("data"),function(value,key){setVal(key,value)}),FullPageDialog.changedStyle(),updateColor("textcolor_pick","textcolor"),updateColor("bgcolor_pick","bgcolor"),updateColor("visited_color_pick","visited_color"),updateColor("active_color_pick","active_color"),updateColor("link_color_pick","link_color")}tinyMCEPopup.requireLangPack();var defaultDocTypes='XHTML 1.0 Transitional=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">,XHTML 1.0 Frameset=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">,XHTML 1.0 Strict=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">,XHTML 1.1=<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">,HTML 4.01 Transitional=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">,HTML 4.01 Strict=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">,HTML 4.01 Frameset=<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">',defaultEncodings="Western european (iso-8859-1)=iso-8859-1,Central European (iso-8859-2)=iso-8859-2,Unicode (UTF-8)=utf-8,Chinese traditional (Big5)=big5,Cyrillic (iso-8859-5)=iso-8859-5,Japanese (iso-2022-jp)=iso-2022-jp,Greek (iso-8859-7)=iso-8859-7,Korean (iso-2022-kr)=iso-2022-kr,ASCII (us-ascii)=us-ascii",defaultFontNames="Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact;WingDings=wingdings",defaultFontSizes="10px,11px,12px,13px,14px,15px,16px";window.FullPageDialog={changedStyle:function(){var val,styles=tinyMCEPopup.editor.dom.parseStyle(getVal("style"));setVal("fontface",styles["font-face"]),setVal("fontsize",styles["font-size"]),setVal("textcolor",styles.color),(val=styles["background-image"])?setVal("bgimage",val.replace(RegExp("url\\('?([^']*)'?\\)","gi"),"$1")):setVal("bgimage",""),setVal("bgcolor",styles["background-color"]),setVal("topmargin",""),setVal("rightmargin",""),setVal("bottommargin",""),setVal("leftmargin",""),(val=styles.margin)&&(val=val.split(" "),styles["margin-top"]=val[0]||"",styles["margin-right"]=val[1]||val[0]||"",styles["margin-bottom"]=val[2]||val[0]||"",styles["margin-left"]=val[3]||val[0]||""),(val=styles["margin-top"])&&setVal("topmargin",val.replace(/px/,"")),(val=styles["margin-right"])&&setVal("rightmargin",val.replace(/px/,"")),(val=styles["margin-bottom"])&&setVal("bottommargin",val.replace(/px/,"")),(val=styles["margin-left"])&&setVal("leftmargin",val.replace(/px/,"")),updateColor("bgcolor_pick","bgcolor"),updateColor("textcolor_pick","textcolor")},changedStyleProp:function(){var val,dom=tinyMCEPopup.editor.dom,styles=dom.parseStyle(getVal("style"));styles["font-face"]=getVal("fontface"),styles["font-size"]=getVal("fontsize"),styles.color=getVal("textcolor"),styles["background-color"]=getVal("bgcolor"),styles["background-image"]=(val=getVal("bgimage"))?"url('"+val+"')":"",delete styles.margin,styles["margin-top"]=(val=getVal("topmargin"))?val+"px":"",styles["margin-right"]=(val=getVal("rightmargin"))?val+"px":"",styles["margin-bottom"]=(val=getVal("bottommargin"))?val+"px":"",styles["margin-left"]=(val=getVal("leftmargin"))?val+"px":"",setVal("style",dom.serializeStyle(dom.parseStyle(dom.serializeStyle(styles)))),this.changedStyle()},update:function(){var data={};tinymce.each(tinyMCEPopup.dom.select("select,input,textarea"),function(node){data[node.id]=getVal(node.id)}),tinyMCEPopup.editor.plugins.fullpage._dataToHtml(data),tinyMCEPopup.close()}},tinyMCEPopup.onInit.add(init)})();