function initCommonAttributes(elm){var formObj=document.forms[0],dom=tinyMCEPopup.editor.dom;setFormValue("title",dom.getAttrib(elm,"title")),setFormValue("id",dom.getAttrib(elm,"id")),selectByValue(formObj,"class",dom.getAttrib(elm,"class"),!0),setFormValue("style",dom.getAttrib(elm,"style")),selectByValue(formObj,"dir",dom.getAttrib(elm,"dir")),setFormValue("lang",dom.getAttrib(elm,"lang")),setFormValue("onfocus",dom.getAttrib(elm,"onfocus")),setFormValue("onblur",dom.getAttrib(elm,"onblur")),setFormValue("onclick",dom.getAttrib(elm,"onclick")),setFormValue("ondblclick",dom.getAttrib(elm,"ondblclick")),setFormValue("onmousedown",dom.getAttrib(elm,"onmousedown")),setFormValue("onmouseup",dom.getAttrib(elm,"onmouseup")),setFormValue("onmouseover",dom.getAttrib(elm,"onmouseover")),setFormValue("onmousemove",dom.getAttrib(elm,"onmousemove")),setFormValue("onmouseout",dom.getAttrib(elm,"onmouseout")),setFormValue("onkeypress",dom.getAttrib(elm,"onkeypress")),setFormValue("onkeydown",dom.getAttrib(elm,"onkeydown")),setFormValue("onkeyup",dom.getAttrib(elm,"onkeyup"))}function setFormValue(name,value){document.forms[0].elements[name]&&(document.forms[0].elements[name].value=value)}function insertDateTime(id){document.getElementById(id).value=getDateTime(new Date,"%Y-%m-%dT%H:%M:%S")}function getDateTime(d,fmt){return fmt=fmt.replace("%D","%m/%d/%y"),fmt=fmt.replace("%r","%I:%M:%S %p"),fmt=fmt.replace("%Y",""+d.getFullYear()),fmt=fmt.replace("%y",""+d.getYear()),fmt=fmt.replace("%m",addZeros(d.getMonth()+1,2)),fmt=fmt.replace("%d",addZeros(d.getDate(),2)),fmt=fmt.replace("%H",""+addZeros(d.getHours(),2)),fmt=fmt.replace("%M",""+addZeros(d.getMinutes(),2)),fmt=fmt.replace("%S",""+addZeros(d.getSeconds(),2)),fmt=fmt.replace("%I",""+((d.getHours()+11)%12+1)),fmt=fmt.replace("%p",""+(12>d.getHours()?"AM":"PM")),fmt=fmt.replace("%%","%")}function addZeros(value,len){var i;if(value=""+value,len>value.length)for(i=0;len-value.length>i;i++)value="0"+value;return value}function selectByValue(form_obj,field_name,value,add_custom,ignore_case){if(form_obj&&form_obj.elements[field_name]){for(var sel=form_obj.elements[field_name],found=!1,i=0;sel.options.length>i;i++){var option=sel.options[i];option.value==value||ignore_case&&option.value.toLowerCase()==value.toLowerCase()?(option.selected=!0,found=!0):option.selected=!1}if(!found&&add_custom&&""!=value){var option=new Option("Value: "+value,value);option.selected=!0,sel.options[sel.options.length]=option}return found}}function setAttrib(elm,attrib,value){var formObj=document.forms[0],valueElm=formObj.elements[attrib.toLowerCase()];tinyMCEPopup.editor.dom.setAttrib(elm,attrib,value||valueElm.value)}function setAllCommonAttribs(elm){setAttrib(elm,"title"),setAttrib(elm,"id"),setAttrib(elm,"class"),setAttrib(elm,"style"),setAttrib(elm,"dir"),setAttrib(elm,"lang")}function insertInlineElement(en){var ed=tinyMCEPopup.editor,dom=ed.dom;ed.getDoc().execCommand("FontName",!1,"mceinline"),tinymce.each(dom.select("span,font"),function(n){("mceinline"==n.style.fontFamily||"mceinline"==n.face)&&dom.replace(dom.create(en,{"data-mce-new":1}),n,1)})}tinyMCEPopup.requireLangPack(),SXE={currentAction:"insert",inst:tinyMCEPopup.editor,updateElement:null},SXE.focusElement=SXE.inst.selection.getNode(),SXE.initElementDialog=function(element_name){addClassesToList("class",tinyMCEPopup.getParam("style_formats",!1)?{tag:element_name}:"xhtmlxtras_styles"),TinyMCE_EditableSelects.init(),element_name=element_name.toLowerCase();var elm=SXE.inst.dom.getParent(SXE.focusElement,element_name.toUpperCase());null!=elm&&elm.nodeName.toUpperCase()==element_name.toUpperCase()&&(SXE.currentAction="update"),"update"==SXE.currentAction&&(initCommonAttributes(elm),SXE.updateElement=elm),document.forms[0].insert.value=tinyMCEPopup.getLang(SXE.currentAction,"Insert",!0)},SXE.insertElement=function(element_name){var tagName,elm=SXE.inst.dom.getParent(SXE.focusElement,element_name.toUpperCase());if(null==elm){var s=SXE.inst.selection.getContent();if(s.length>0){tagName=element_name,insertInlineElement(element_name);for(var elementArray=tinymce.grep(SXE.inst.dom.select(element_name)),i=0;elementArray.length>i;i++){var elm=elementArray[i];SXE.inst.dom.getAttrib(elm,"data-mce-new")&&(elm.id="",elm.setAttribute("id",""),elm.removeAttribute("id"),elm.removeAttribute("data-mce-new"),setAllCommonAttribs(elm))}}}else setAllCommonAttribs(elm);SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel")},SXE.removeElement=function(element_name){element_name=element_name.toLowerCase(),elm=SXE.inst.dom.getParent(SXE.focusElement,element_name.toUpperCase()),elm&&elm.nodeName.toUpperCase()==element_name.toUpperCase()&&(tinyMCE.execCommand("mceRemoveNode",!1,elm),SXE.inst.nodeChanged(),tinyMCEPopup.execCommand("mceEndUndoLevel"))},SXE.showRemoveButton=function(){document.getElementById("remove").style.display=""},SXE.containsClass=function(elm,cl){return elm.className.indexOf(cl)>-1?!0:!1},SXE.removeClass=function(elm,cl){if(null==elm.className||""==elm.className||!SXE.containsClass(elm,cl))return!0;for(var classNames=elm.className.split(" "),newClassNames="",x=0,cnl=classNames.length;cnl>x;x++)classNames[x]!=cl&&(newClassNames+=classNames[x]+" ");elm.className=newClassNames.substring(0,newClassNames.length-1)},SXE.addClass=function(elm,cl){return SXE.containsClass(elm,cl)||(elm.className?elm.className+=" "+cl:elm.className=cl),!0};