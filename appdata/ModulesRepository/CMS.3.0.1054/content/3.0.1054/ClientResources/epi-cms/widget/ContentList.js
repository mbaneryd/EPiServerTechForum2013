//>>built
define("epi-cms/widget/ContentList",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/aspect","dojo/Evented","dgrid/Keyboard","dgrid/OnDemandList","dgrid/Selection","dojox/html/entities","epi","epi/shell/dgrid/Formatter","epi/shell/TypeDescriptorManager","epi-cms/core/ContentReference","epi-cms/dgrid/formatters","epi-cms/dgrid/DnD","epi-cms/dgrid/WithContextMenu","epi-cms/widget/ReadOnlyContentList"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,DnD,_10,_11){return _1([_11,_6],{_gridClass:_1([_8,_c,_9,DnD,_7,_10]),resources:"",noDataMessage:null,editingItem:null,postCreate:function(){this.inherited(arguments);_3.add(this.domNode,"epi-contentList");},_setCurrentItemAttr:function(_12){if(!this.get("editingItem")){this.set("editingItem",_12);}this._set("currentItem",_12);this.select(_12);},_setNoDataMessageAttr:function(_13){this.noDataMessage=_13;this.grid.set("noDataMessage",_13);},_dndNodeCreator:function(_14,_15){var _16=_d.getAndConcatenateValues(_14.typeIdentifier,"dndTypes");if(!_16&&this.dndTypes){_16=this.dndTypes;}return {"node":_4.create("div").appendChild(document.createTextNode(_14.name)),"type":_16,"data":_14};},getListSettings:function(){var _17={hasMenu:!!this.contextMenu,settings:{title:_b.resources.action.options}};return _2.delegate(this._getBaseSettings(_17),{noDataMessage:this.noDataMessage,dndParams:{copyOnly:true,selfAccept:false,accept:[],creator:_2.hitch(this,this._dndNodeCreator)}});},setupEvents:function(){this.inherited(arguments);this.own(this.grid.on(".epi-createContent:click",_2.hitch(this,function(e){this.emit("createItemAction",{});})),_5.around(this.grid,"insertRow",_2.hitch(this,this._aroundInsertRow)));if(this.contextMenu){this.own(this.contextMenu.on("close",_2.hitch(this,function(){var _18=this.get("editingItem");if(_18){this.select(_18);}})));}},_onSelect:function(evt){this.inherited(arguments);if(this.grid.selectionMode==="single"){this.emit("itemSelected",evt.rows[0].data);}},editContent:function(_19){if(!_19||!this.grid.row(_19).element){return;}this.emit("itemAction",_19);this.set("editingItem",this.currentItem);},_onChangeContext:function(evt){this.editContent(this.grid.row(evt).data);},toggleCut:function(_1a,_1b){var row;if(_1a){row=this.grid.row(_e.toContentReference(_1a.contentLink).id);if(row&&row.element){_3.toggle(row.element,"epi-opacity50",_1b);}}}});});