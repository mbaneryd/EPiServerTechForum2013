//>>built
define("epi-cms/widget/CategoryTreeStoreModel",["dojo","epi/dependency","epi/routes"],function(_1,_2,_3){return _1.declare(null,{store:null,rootCategory:undefined,constructor:function(_4){_1.mixin(this,_4);if(!this.store){var _5=_2.resolve("epi.storeregistry");this.store=_5.get("epi.cms.category");}},getRoot:function(_6){_1.when(this.store.get(this.rootCategory),_6);},mayHaveChildren:function(_7){return _7.hasChildren;},getChildren:function(_8,_9){var id=this.getIdentity(_8),_a=this.store.query({id:id,query:"getchildren"});_a.then(function(_b){_8.children=_b;_9(_b);});},getIdentity:function(_c){return this.store.getIdentity(_c);},getLabel:function(_d){return _d.description;}});});