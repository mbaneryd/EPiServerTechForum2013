//>>built
define("epi-cms/widget/LinkEditor",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dijit/_CssStateMixin","epi","epi/dependency","epi/shell/widget/dialog/_DialogContentMixin","epi/shell/widget/FormContainer","epi/shell/widget/_ActionProviderWidget","epi/shell/widget/_ModelBindingMixin","epi-cms/widget/viewmodel/LinkEditorViewModel"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _2([_a,_b,_9,_6,_c],{_metadataManager:null,modelClassName:_d,hiddenFields:[],postMixInProperties:function(){this.inherited(arguments);this.doLayout=false;this._metadataManager=this._metadataManager||_8.resolve("epi.shell.MetadataManager");if(!this.model&&this.modelClassName){var _e=_2(this.modelClassName);this.model=new _e();}this._actions=[{name:"ok",label:_7.resources.action.ok,settings:{type:"button","class":"Salt"},action:_3.hitch(this,function(){if(this.validate()){this.executeDialog({action:"ok"});}})},{name:"delete",label:_7.resources.action.deletelabel,settings:{type:"button",disabled:true},action:_3.hitch(this,function(){_1.forEach(this.form._getDescendantFormWidgets(),function(_f){_f.set("value","");},this);this.executeDialog({action:"delete"});})},{name:"cancel",label:_7.resources.action.cancel,settings:{type:"button"},action:_3.hitch(this,function(){this.cancelDialog();})}];},postCreate:function(){if(this.modelType){this.metadata=this._metadataManager.getMetadataForType(this.modelType);}this.inherited(arguments);},_setValueAttr:function(_10){this.inherited(arguments);this._handleActions(_10);},onFormCreated:function(_11){_1.forEach(this.form._getDescendantFormWidgets(),function(_12){if(this.hiddenFields&&this.hiddenFields.indexOf(_12.name)>-1){var _13=this._getAncestorNode(_12.domNode,"epi-formsRow");_4.set(_13,{display:"none"});_12.set("required",false);}},this);this._handleActions(this.value);},_handleActions:function(_14){if(this.hasAction("delete")){this.setActionProperty("delete","disabled",this.model._isEmptyObject(_14));}},getFormWidget:function(_15){var _16=_1.filter(this.form._getDescendantFormWidgets(),function(_17){return _17&&_17.name===_15;},this);return _16?_16[0]:null;},_getAncestorNode:function(_18,_19){var _1a=_18?_18.parentNode:null;if(!_1a){return null;}if(!_5.contains(_1a,_19)){return this._getAncestorNode(_1a,_19);}return _1a;},getActions:function(){return this._actions;},isValidValue:function(){return _1.every(this.form._getDescendantFormWidgets(),function(_1b){return _1b.get("required")?!!_1b.get("value"):true;});}});});