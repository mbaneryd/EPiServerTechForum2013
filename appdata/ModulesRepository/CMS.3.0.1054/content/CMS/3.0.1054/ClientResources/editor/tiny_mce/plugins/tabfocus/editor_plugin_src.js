(function(){var DOM=tinymce.DOM,Event=tinymce.dom.Event,each=tinymce.each,explode=tinymce.explode;tinymce.create("tinymce.plugins.TabFocusPlugin",{init:function(ed){function tabCancel(ed,e){return 9===e.keyCode?Event.cancel(e):void 0}function tabHandler(ed,e){function find(d){function canSelectRecursive(e){return"BODY"===e.nodeName||"hidden"!=e.type&&!("none"==e.style.display)&&!("hidden"==e.style.visibility)&&canSelectRecursive(e.parentNode)}function canSelectInOldIe(el){return el.attributes.tabIndex.specified||"INPUT"==el.nodeName||"TEXTAREA"==el.nodeName}function isOldIe(){return tinymce.isIE6||tinymce.isIE7}function canSelect(el){return(!isOldIe()||canSelectInOldIe(el))&&"-1"!=el.getAttribute("tabindex")&&canSelectRecursive(el)}if(el=DOM.select(":input:enabled,*[tabindex]:not(iframe)"),each(el,function(e,i){return e.id==ed.id?(x=i,!1):void 0}),d>0){for(i=x+1;el.length>i;i++)if(canSelect(el[i]))return el[i]}else for(i=x-1;i>=0;i--)if(canSelect(el[i]))return el[i];return null}var x,i,el,v;return 9===e.keyCode&&(v=explode(ed.getParam("tab_focus",ed.getParam("tabfocus_elements",":prev,:next"))),1==v.length&&(v[1]=v[0],v[0]=":prev"),el=e.shiftKey?":prev"==v[0]?find(-1):DOM.get(v[0]):":next"==v[1]?find(1):DOM.get(v[1]))?(el.id&&(ed=tinymce.get(el.id||el.name))?ed.focus():window.setTimeout(function(){tinymce.isWebKit||window.focus(),el.focus()},10),Event.cancel(e)):void 0}ed.onKeyUp.add(tabCancel),tinymce.isGecko?(ed.onKeyPress.add(tabHandler),ed.onKeyDown.add(tabCancel)):ed.onKeyDown.add(tabHandler)},getInfo:function(){return{longname:"Tabfocus",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/tabfocus",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("tabfocus",tinymce.plugins.TabFocusPlugin)})();