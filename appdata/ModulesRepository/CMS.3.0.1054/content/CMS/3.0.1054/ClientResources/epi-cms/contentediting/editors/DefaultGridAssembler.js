//>>built
define("epi-cms/contentediting/editors/DefaultGridAssembler",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/json","dojo/Stateful","epi/shell/command/builder/ButtonBuilder","epi/shell/command/withConfirmation","epi-cms/dgrid/formatters"],function(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_2([],{gridType:null,gridSettings:null,columnDefinitions:null,listCommands:null,itemCommandsFactory:null,constructor:function(_a){_3.mixin(this,_a);},build:function(_b,_c){},instantiateGrid:function(_d,_e,_f,_10){return new _d(_3.mixin(_e,{columns:_f,className:"epi-plain-grid"}),_10);}});return _2([_9],{itemCommandProviderMap:null,constructor:function(){this.itemCommandProviderMap={};},build:function(_11,_12){this.columnDefinitions["_epiGrid_Action"]={renderHeaderCell:function(){},renderCell:_3.hitch(this,function(_13,_14,_15,_16){var _17=this._getItemCommands(_13);this.itemCommandProviderMap[_4.stringify(_13)]=new _5({commands:_17});this.renderActionMenu(_13,_15,_17);}),className:"epi-columnNarrow",sortable:false};var _18=this.instantiateGrid(this.gridType,this.gridSettings,this.columnDefinitions,_11);_18.itemCommandProviderMap=this.itemCommandProviderMap;this._setupCommands(this.listCommands,_12);return _18;},renderActionMenu:function(_19,_1a,_1b){_1a.innerHTML=_1b&&_1b.length>0?_8.menu({title:epi.resources.action.options}):"";},_getItemCommands:function(_1c){var _1d=this.itemCommandsFactory(_1c,"context");_1.some(_1d,function(_1e){if(_1e.name=="remove"&&this.gridSettings.useDeleteWithConfirmation){_1e=_7(_1e,null,{title:this.gridSettings.deleteConfirmationTitle,description:this.gridSettings.deleteConfirmationMessage});return true;}},this);return _1d;},_setupCommands:function(_1f,_20){var _21=this.getListCommandBuilder();_1.forEach(_1f,function(_22){_21.create(_22,_20);},this);},getListCommandBuilder:function(){return new _6({settings:{showLabel:true}});}});});