//>>built
define("epi-cms/widget/ChannelSelector",["dojo","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","epi","epi/dependency","epi-cms/widget/_ItemSelectorBase","epi-cms/widget/_DropDownWidgetItemMixin","epi/i18n!epi/cms/nls/episerver.cms.widget.channelselector"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1.declare([_7,_8],{defaultItem:{name:_9.defaultitem,resolutionName:_9.defaultitem},_isFinished:null,_channelHashMap:{},postMixInProperties:function(){this.inherited(arguments);var _a=_6.resolve("epi.storeregistry");this._store=_a.get("epi.cms.displaychannels");},postCreate:function(){this._isFinished=new _4();this.inherited(arguments);this.set("header",_9.header);_1.when(this._store.query({query:"getallregistered"}),_2.hitch(this,function(_b){this._createHashMap(_b);this.checkedItem=(this.checkedItem?this._channelHashMap[this.checkedItem]:this.defaultItem.name);_b.unshift(this.defaultItem);this.set("items",_b);this._isFinished.resolve({status:true});}));},isSetupFinished:function(){return this._isFinished;},_createHashMap:function(_c){_3.forEach(_c,_2.hitch(this,function(_d){this._channelHashMap[_d.channelName]=_d.name;}));}});});