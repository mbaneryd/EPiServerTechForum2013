tinyMCEPopup.requireLangPack();var AnchorDialog={init:function(ed){var elm,f=document.forms[0];this.editor=ed,elm=ed.dom.getParent(ed.selection.getNode(),"A"),v=ed.dom.getAttrib(elm,"name")||ed.dom.getAttrib(elm,"id"),v&&(this.action="update",f.anchorName.value=v),f.insert.value=ed.getLang(elm?"update":"insert")},update:function(){var elm,attribName,ed=this.editor,name=document.forms[0].anchorName.value;if(!name||!/^[a-z][a-z0-9\-\_:\.]*$/i.test(name))return tinyMCEPopup.alert("advanced_dlg.anchor_invalid"),void 0;tinyMCEPopup.restoreSelection(),"update"!=this.action&&ed.selection.collapse(1);var aRule=ed.schema.getElementRule("a");if(attribName=!aRule||aRule.attributes.name?"name":"id",elm=ed.dom.getParent(ed.selection.getNode(),"A"))elm.setAttribute(attribName,name),elm[attribName]=name,ed.undoManager.add();else{var attrs={"class":"mceItemAnchor"};attrs[attribName]=name,ed.execCommand("mceInsertContent",0,ed.dom.createHTML("a",attrs,"ï»¿")),ed.nodeChanged()}tinyMCEPopup.close()}};tinyMCEPopup.onInit.add(AnchorDialog.init,AnchorDialog);