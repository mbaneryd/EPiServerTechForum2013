(function(tinymce){epiContentBlockUtilities=function(){var controlsLockedBy=null,pub={_getParentNode:function(node,cssClass){return this.ed.dom.hasClass(node,cssClass)?node:this.ed.dom.getParent(node,"."+cssClass)},_updateCommandState:function(enable){return enable&&null!==controlsLockedBy&&controlsLockedBy!=this?(this._disabled=!1,!0):enable?(this._disabled&&(this._setDisabled(!1,this._enabledControls),controlsLockedBy=null),!0):(this._setDisabled(!0,this._enabledControls),controlsLockedBy=this,!1)},_setDisabled:function(disable,enabledControls){var i,buttons=enabledControls.split(",");enabledControls="";var prefix="|"+this.ed.id+"_",length=buttons.length;for(i=0;length>i;i++)enabledControls=enabledControls+prefix+tinymce.trim(buttons[i]);enabledControls+="|",tinymce.each(this.ed.controlManager.controls,function(control){0>enabledControls.indexOf("|"+control.id+"|")&&(control.setDisabled(disable),disable&&control.setActive(!1))}),this._disabled=disable},_getAllContentGroups:function(){for(var dynamiccontentNodes=this.ed.dom.select("[data-contentgroup!=]"),allContentGroups="",i=0;dynamiccontentNodes.length>i;i++){var value=dynamiccontentNodes[i].getAttribute("data-contentgroup");if(value&&""!==value){if(allContentGroups==value||allContentGroups.indexOf(","+value)>=0||allContentGroups.indexOf(value+",")>=0)continue;allContentGroups+=""!==allContentGroups?","+value:value}}return allContentGroups},_onContentChanged:function(){this.ed.undoManager.add(),this.ed.nodeChanged()}};return pub}()})(tinymce,epiJQuery);