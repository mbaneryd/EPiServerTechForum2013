//>>built
require({cache:{"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>"}});define("epi-packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/DetailedView","epi-packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,res){return _1.declare([_6,_7,_8],{res:res,templateString:_10,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});this.enableUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"EnableModule"});this.disableUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"DisableModule"});},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.DisableButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.EnableButton.domNode,"click",function(e){_2.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},onInstall:function(_11){},onInstallError:function(_12){},onUpdate:function(_13){},onUpdateError:function(_14){},onUninstall:function(_15){},onUninstallError:function(_16){},onEnable:function(_17){},onEnableError:function(_18){},onDisable:function(_19){},onDisableError:function(_1a){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _1b=_a.toUserFriendlyHtml(this.module.installDate);var _1c="Installed on "+_1b+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_1c;}else{_1.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_1d){if(_1d){this.moduleIcon.innerHTML=_4.substitute(this.iconTemplate,[_1d]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){_1.style(this.InstallButton.domNode,"display","none");_1.style(this.UninstallButton.domNode,"display","none");_1.style(this.UpdateButton.domNode,"display","none");_1.style(this.updateIndicatorContainer,"display","none");_1.style(this.EnableButton.domNode,"display","none");_1.style(this.DisableButton.domNode,"display","none");_1.style(this.disabledIndicatorContainer,"display","none");_1.removeClass(this.moduleItemContainer,"disabledItem");if(this.module.isInstalled){_1.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}if(this.module.actionsAvailable.install&&!this.module.actionsAvailable.installAsUpdate){_1.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.enable){_1.style(this.EnableButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.installAsUpdate){_1.style(this.UpdateButton.domNode,"display","inline-block");}if(this.module.isDisabled){_1.style(this.disabledIndicatorContainer,"display","inline-block");_1.addClass(this.moduleItemContainer,"disabledItem");}},_createTags:function(){_1.forEach(this.module.tags,function(tag,i){var _1e=_1.create("span");_3.add(_1e,"epi-valueItem");this.tagList.appendChild(_1e);_1e.innerHTML=tag;},this);},_createDependencies:function(){_1.forEach(this.module.dependencies,function(_1f,i){var _20=_1.create("span");_3.add(_20,"epi-valueItem");this.dependenciesList.appendChild(_20);_20.innerHTML=_1f.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,_1.hitch(this,function(_21){if(_21){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,_1.hitch(this,function(_22){if(_22){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,_1.hitch(this,function(_23){if(_23){this._updateModule();}}));},_moreInfoClick:function(e){_2.stop(e);var _24=this;var _25=new _d({content:new _e({currentPackage:this.module,installHandler:_1.hitch(_25,function(){_24._showConfirmationDialog(_24.res.installconfirmation,_1.hitch(_25,function(_26){if(_26){this.hide();_24._installModule();}}));}),updateHandler:_1.hitch(_25,function(){_24._showConfirmationDialog(_24.res.updateconfirmation,_1.hitch(_25,function(_27){if(_27){this.hide();_24._updateModule();}}));}),unInstallHandler:_1.hitch(_25,function(){_24._showConfirmationDialog(_24.res.uninstallconfirmation,_1.hitch(_25,function(_28){if(_28){this.hide();_24._uninstallModule();}}));}),enableHandler:_1.hitch(_25,function(){_24._showConfirmationDialog(_24.res.enableconfirmation,_1.hitch(_25,function(_29){if(_29){this.hide();_24._enableModule();}}));}),disableHandler:_1.hitch(_25,function(){_24._showConfirmationDialog(_24.res.disableconfirmation,_1.hitch(_25,function(_2a){if(_2a){this.hide();_24._disableModule();}}));}),closeHandler:_1.hitch(_25,function(){_25.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_25.show();},_enableClick:function(e){this._showConfirmationDialog(this.res.enableconfirmation,_1.hitch(this,function(_2b){if(_2b){this._enableModule();}}));},_disableClick:function(e){this._showConfirmationDialog(this.res.disableconfirmation,_1.hitch(this,function(_2c){if(_2c){this._disableModule();}}));},_installModule:function(){this._showStandby();var _2d={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_2d);_1.xhrPost({content:_2d,url:this.installUrl,handleAs:"json",load:_1.hitch(this,function(_2e){this.module=_2e;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:_1.hitch(this,function(err,_2f){this._moduleStandby.hide();_1.publish("onServerError",[_2f]);})});},_updateModule:function(){this._showStandby();var _30={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_30);_1.xhrPost({content:_30,url:this.updateUrl,handleAs:"json",load:_1.hitch(this,function(_31){this.module=_31;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:_1.hitch(this,function(err,_32){this._moduleStandby.hide();_1.publish("onServerError",[_32]);})});},_uninstallModule:function(){this._showStandby();var _33={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_33);_1.xhrPost({content:_33,url:this.uninstallUrl,handleAs:"json",load:_1.hitch(this,function(_34){this.module=_34;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:_1.hitch(this,function(err,_35){this._moduleStandby.hide();_1.publish("onServerError",[_35]);})});},_enableModule:function(){this._showStandby();var _36={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_36);_1.xhrPost({content:_36,url:this.enableUrl,handleAs:"json",load:_1.hitch(this,function(_37){this.module=_37;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onEnableError(this);}else{this.onEnable(this);}}),error:_1.hitch(this,function(err,_38){this._moduleStandby.hide();_1.publish("onServerError",[_38]);})});},_disableModule:function(){this._showStandby();var _39={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_39);_1.xhrPost({content:_39,url:this.disableUrl,handleAs:"json",load:_1.hitch(this,function(_3a){this.module=_3a;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onDisableError(this);}else{this.onDisable(this);}}),error:_1.hitch(this,function(err,_3b){this._moduleStandby.hide();_1.publish("onServerError",[_3b]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _9({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_3c,_3d){var _3e=new _c({description:_1.replace(_3c,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_3d});_3e.show();}});});