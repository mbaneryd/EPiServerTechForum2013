//>>built
define("epi-cms/widget/overlay/ItemCollection",["dojo/_base/declare","dojo/_base/lang","epi-cms/contentediting/viewmodel/ItemCollectionViewModel","epi-cms/widget/overlay/Property","epi/string"],function(_1,_2,_3,_4,_5){return _1([_4],{modelType:"epi-cms/contentediting/viewmodel/ItemCollectionViewModel",model:null,postMixInProperties:function(){this.inherited(arguments);this._setupAllowedTypes();this._setupModel(this.contentModel.get(this.name));this.own(this.contentModel.watch(this.name,_2.hitch(this,function(_6,_7,_8){this.model.set("data",_8);})));},onDrop:function(_9,_a){this.model.addTo(_a,null,false);},_setupModel:function(_b){var _c=_5.slashName(this.modelType);require([_c],_2.hitch(this,function(_d){this.model=new _d(_b,this.modelParams);this.own(this.model.on("changed",_2.hitch(this,function(_e){this.onValueChange({propertyName:this.name,value:this.model.get("value")});})));}));},_setupAllowedTypes:function(){var _f=this.modelParams.itemConverterKey,_10=this.modelParams.customTypeIdentifier;this.allowedDndTypes=this.allowedDndTypes||[];if(_f){this.allowedDndTypes=this.allowedDndTypes.map(function(_11){return _11+"."+_f;});}if(_10){this.allowedDndTypes.unshift(_10);}}});});