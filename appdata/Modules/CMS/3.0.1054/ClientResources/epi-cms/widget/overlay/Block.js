//>>built
require({cache:{"url:epi-cms/widget/templates/Block.html":"<div class=\"dojoDndItem epi-overlay-block\">\r\n    <div data-dojo-attach-point=\"containerDomNode\"></div>\r\n    <span class=\"epi-personalized\" data-dojo-attach-point=\"iconsContainer\">\r\n        <span class=\"epi-overlayControls epi-mediumButton \">\r\n            <span class=\"dijitReset dijitInline dijitIcon epi-iconWarning\" data-dojo-attach-point=\"warningIcon\"></span>\r\n            <span class=\"dijitReset dijitInline dijitIcon epi-iconUsers\" data-dojo-attach-point=\"personalizedIcon\"></span>\r\n        </span>\r\n    </span>\r\n    <button class=\"epi-chromelessButton epi-overlayControls epi-settingsButton epi-mediumButton\" data-dojo-attach-point=\"settingsButton\" data-dojo-type=\"dijit/form/DropDownButton\" data-dojo-props=\"showLabel:false, title:'${res.settingstooltip}', iconClass:'epi-iconContextMenu'\">\r\n        <div data-dojo-attach-point=\"contextMenu\" data-dojo-type=\"epi/shell/widget/ContextMenu\"></div>\r\n    </button>\r\n</div>"}});define("epi-cms/widget/overlay/Block",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/on","dojo/when","epi/shell/widget/overlay/_Base","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","epi-cms/widget/overlay/_OverlayItemInfoMixin","epi-cms/contentediting/command/ContentAreaCommands","epi-cms/ContentLanguageHelper","epi/i18n!epi/cms/nls/episerver.cms.widget.blockcontextmenu","dojo/text!../templates/Block.html","dijit/form/DropDownButton","epi/shell/widget/ContextMenu"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _1([_6,_7,_8,_9],{templateString:_d,res:_c,_setMissingRendererAttr:function(_e){_3.toggle(this.domNode,"epi-overlay-item-missing-renderer",_e);},buildRendering:function(){this.inherited(arguments);_4.set(this.personalizedIcon,"display",this.viewModel.contentGroup?"":"none");},postCreate:function(){this.inherited(arguments);this._injectDynamicStyles();this.commandProvider=this.commandProvider||new _a({model:this.viewModel});this.own(this.viewModel.watch("statusMessage",_2.hitch(this,function(_f,_10,_11){_5(_b.getMissingLanguageMessage(this.viewModel.content),_2.hitch(this,function(_12){_4.set(this.warningIcon,"display",_12?"":"none");}));_4.set(this.iconsContainer,"display",this.viewModel.contentGroup||_11?"":"none");})));this.viewModel.loadStatus();this.contextMenu.addProvider(this.commandProvider);if(this.blockInfo&&this.blockInfo.missingrenderer){this.set("missingRenderer",this.blockInfo.missingrenderer);}this.own(on(this.domNode,"click",_2.hitch(this.viewModel,"set","selected",true)),on(this.settingsButton,"click",_2.hitch(this,"_onContextMenuClick")));},_injectDynamicStyles:function(){var _13=this.sourceItemNode,_14=_4.get(_13,"display"),_15=/inline|inline-block/.test(_14)?"-inline":"";_3.add(_13,"epi-injected-minSize"+_15);},_onContextMenuClick:function(){this.commandProvider.set("model",this.viewModel);this.viewModel.set("selected",true);return false;}});});