tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var t=this,f=document.forms[0],m=tinyMCEPopup.getWindowArg("mode");t.switchMode(m),f[m+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),f[m+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(tab_id){t.switchMode(tab_id.substring(0,tab_id.indexOf("_")))})},switchMode:function(m){var f,lm=this.lastMode;lm!=m&&(f=document.forms[0],lm&&(f[m+"_panel_searchstring"].value=f[lm+"_panel_searchstring"].value,f[m+"_panel_backwardsu"].checked=f[lm+"_panel_backwardsu"].checked,f[m+"_panel_backwardsd"].checked=f[lm+"_panel_backwardsd"].checked,f[m+"_panel_casesensitivebox"].checked=f[lm+"_panel_casesensitivebox"].checked),mcTabs.displayTab(m+"_tab",m+"_panel"),document.getElementById("replaceBtn").style.display="replace"==m?"inline":"none",document.getElementById("replaceAllBtn").style.display="replace"==m?"inline":"none",this.lastMode=m)},searchNext:function(a){function fix(){r=se.getRng().cloneRange(),ed.getDoc().execCommand("SelectAll",!1,null),se.setRng(r)}function replace(){ed.selection.setContent(rs)}var f,s,b,ed=tinyMCEPopup.editor,se=ed.selection,r=se.getRng(),m=this.lastMode,fl=0,w=ed.getWin(),fo=(ed.windowManager,0);if(f=document.forms[0],s=f[m+"_panel_searchstring"].value,b=f[m+"_panel_backwardsu"].checked,ca=f[m+"_panel_casesensitivebox"].checked,rs=f.replace_panel_replacestring.value,tinymce.isIE&&(r=ed.getDoc().selection.createRange()),""!=s){switch(ca&&(fl=4|fl),a){case"all":if(ed.execCommand("SelectAll"),ed.selection.collapse(!0),tinymce.isIE){for(ed.focus(),r=ed.getDoc().selection.createRange();r.findText(s,b?-1:1,fl);)r.scrollIntoView(),r.select(),replace(),fo=1,b&&r.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else for(;w.find(s,ca,b,!1,!1,!1,!1);)replace(),fo=1;return fo?tinyMCEPopup.alert(ed.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(ed.getLang("searchreplace_dlg.notfound")),void 0;case"current":ed.selection.isCollapsed()||replace()}se.collapse(b),r=se.getRng(),s&&(tinymce.isIE?(ed.focus(),r=ed.getDoc().selection.createRange(),r.findText(s,b?-1:1,fl)?(r.scrollIntoView(),r.select()):tinyMCEPopup.alert(ed.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):w.find(s,ca,b,!1,!1,!1,!1)?fix():tinyMCEPopup.alert(ed.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);