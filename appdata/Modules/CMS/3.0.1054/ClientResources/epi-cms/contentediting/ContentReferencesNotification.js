//>>built
define("epi-cms/contentediting/ContentReferencesNotification",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/dom-construct","dojo/on","dojo/when","epi","epi/shell/TypeDescriptorManager","epi-cms/contentediting/_ContentEditingNotification","epi-cms/command/BackCommand","epi-cms/widget/sharedContentDialogHandler","epi/i18n!epi/cms/nls/episerver.cms.contentediting.notificationbar"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b){return _2([_8],{_backCommand:null,constructor:function(_c){this._backCommand=new _9();},postscript:function(){this._storeName="epi.cms.contentreferences";this.inherited(arguments);},_executeAction:function(_d){var _e=_7.getValue(_d.typeIdentifier,"actAsAnAsset");if(!_e){return false;}return this._store.get(_d.contentLink);},_onExecuteSuccess:function(_f){if(!_f){return;}var _10=_4.create("div");if(_f.length>0){_10.innerHTML+=_b.affect;var _11=_f.length+" "+(_f.length===1?_6.resources.text.item:_6.resources.text.items),_12=this,_13=_4.create("a",{href:"#",innerHTML:_11,title:_b.referencestooltip},_10);on(_13,"click",function(evt){_3.stop(evt);_12._showReferenceDialog();});}else{_10.innerHTML+=_6.resources.messages.notinuse;}this._backCommand.set("model",{});this._setNotification({content:_10,commands:[this._backCommand]});},_showReferenceDialog:function(){_a({contentData:this.get("invokeActionValue"),showToolbar:true,mode:_a.mode.show});}});});