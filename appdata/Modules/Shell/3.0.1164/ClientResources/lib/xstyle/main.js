//>>built
define("xstyle/main",["require","put-selector/put"],function(_1,_2){"use strict";var _3=/\s*([^{\}\[\]\(\)\/\\'":=;]*)([=:]\??\s*([^{\}\[\]\(\)\/\\'":;]*))?([{\}\[\]\(\)\/\\'":;]|$)/g;var _4=/((?:\\.|[^'])*)'/g;var _5=/((?:\\.|[^"])*)"/g;var _6=/\*\//g;var _7=0;var _8={"TABLE":"tr","TBODY":"tr","TR":"td","UL":"li","OL":"li","SELECT":"option"};var _9={"{":"}","[":"]","(":")"};var _a=document;function _b(_c,_d){return _c&&_c.then?_c.then(_d):_d(_c);};function _e(_f,_10,_11){return _b(_f,function(_12){var _13=_10[0];if(!_12){return _11(_13||_12);}if(_13&&_12.get){return _e(_12.get(_13),_10.slice(1),_11);}if(_12.receive){return _12.receive(_13?function(_14){_e(_14,_10,_11);}:_11);}if(_13){return _e(_12[_13],_10.slice(1),_11);}_11(_12);});};function set(_15,_16,_17){_e(_15,_16.slice(0,_16.length-1),function(_18){var _19=_16[_16.length-1];_18.set?_18.set(_19,_17):_18[_19]=_17;});};var _1a="".trim?function(str){return str.trim();}:function(str){return str.replace(/^\s+|\s+$/g,"");};var _1b,_1c=_a.createElement("div");function _1d(tag){var _1e=_a.getElementsByTagName(tag);for(var i=0;i<_1e.length;i++){_1f(_1e[i]);}};function _20(){return this.join("");};function _21(_22){_22.toString=_20;return _22;};function _23(_24){this.value=_24;};_23.prototype.toString=function(){return "\""+this.value.replace(/["\\\n\r]/g,"\\$&")+"\"";};var ua=navigator.userAgent;var _25=ua.indexOf("WebKit")>-1?"-webkit-":ua.indexOf("Firefox")>-1?"-moz-":ua.indexOf("MSIE")>-1?"-ms-":ua.indexOf("Opera")>-1?"-o-":"";function _1f(_26,_27,_28){var _29=_26.sheet||_26.styleSheet||_26;var _2a=_29.needsParsing,_2b=_29.rules||_29.cssRules;function _2c(){_1(["xstyle/load-imports"],function(_2d){_2d(_26,function(){_1f(_26,_27,true);});});};if(_29.imports&&!_28&&_29.imports.length){return _2c();}if(!_2a){for(var i=0;i<_2b.length;i++){var _2e=_2b[i];if(_2e.href&&!_28){return _2c();}if(_2e.selectorText&&_2e.selectorText.substring(0,2)=="x-"){_2a=true;if(/^'/.test(_2e.style.content)){}}}}_2f(_29.localSource||(_29.ownerNode||_29.ownerElement).innerHTML,_29,_27);};_2f.getStyleSheet=function(_30,_31){return _30.styleSheet;};function _2f(_32,_33,_34){if(!_33.addRule){_33.addRule=function(_35,_36,_37){return this.insertRule(_35+"{"+_36+"}",_37>=0?_37:this.cssRules.length);};}if(!_33.deleteRule){_33.deleteRule=_33.removeRule;}var _38={property:{}};function _39(_3a,_3b,_3c){var _3d=_38[_3a]||(_38[_3a]={});_3d[_3b]=_3c;};function _3e(_3f){if(!_38[_3f]){_38[_3f]={};}_39("selector","x-"+_3f,{onRule:function(_40){_40.eachProperty(function(_41,_42){var _43=_42.toString();do{var _44=_43.match(/([^, \(]+)(?:[, ]+(.+))?/);if(!_44){return;}var _45=_44[1];if(_45=="module"){return _39(_3f,_41,_42[1].args[0]);}if(_45=="default"){if(_3f=="pseudo"){try{_a.querySelectorAll("x:"+_41);return;}catch(e){}}}else{if(_45=="prefix"){}else{return _39(_3f,_41,function(){return _42;});}}}while(_43=_44[2]);});}});};_3e("property");_3e("function");_3e("pseudo");_38["function"]["var"]=_f7;_38["function"]["extends"]=_f7;var _46=1;var _47=(_33.href||location.href).replace(/[^\/]+$/,"");function _48(){};_48.prototype={eachProperty:function(_49){var _4a=this.values||0;for(var i=0;i<_4a.length;i++){var _4b=_4a[i];_49.call(this,_4b||"unnamed",_4a[_4b]);}},fullSelector:function(){return (this.parent?this.parent.fullSelector():"")+(this.selector||"")+" ";},newRule:function(_4c){return (this.rules||(this.rules={}))[_4c]=new _48();},newCall:function(_4d,_4e,_4f){var _50=new _51(_4d);return _50;},addSheetRule:function(_52,_53){if(_53&&_52.charAt(0)!="@"){var _54=_33.addRule(_52,_53);if(_54==-1){_54=_33.cssRules.length-1;}return _33.cssRules[_54];}},onRule:function(){this.getCssRule();},getCssRule:function(){if(!this.cssRule){this.cssRule=this.addSheetRule(this.selector,this.cssText);}return this.cssRule;},get:function(key){return this.values[key];},declareProperty:function(_55,_56,_57){if(_56[0].toString().charAt(0)==">"){if(!_55){this.generator=_56;_56=_df(_56,this);_f7.addRenderer("",_56,this,_56);return;}}else{var _58=_55 in _1c.style||_126(this,_55);if(!_57||!_58){var _59=(this.properties||(this.properties={}));_59[_55]=_56;if(_58){}}}},setValue:function(_5a,_5b){var _5c=(this.values||(this.values=[]));_5c.push(_5a);_5c[_5a]=_5b;var _5d=_5b.calls;if(_5d){for(var i=0;i<_5d.length;i++){var _5e=_5d[i];var _5f=_5e.ref;if(_5f&&typeof _5f.call=="function"){_5f.call(_5e,this,_5a,_5b);}}}if(_5a){var _60=_5a;do{var _61=_126(this,_5a);if(_61){var _62=this;_b(_f8(_62,_5a,_61),function(_63){_63=_63.splice?_63:[_63];for(var i=0;i<_63.length;i++){var _64=_63[i];if(_64.put(_5b,_62,_5a)){break;}}});break;}_5a=_5a.substring(0,_5a.lastIndexOf("-"));}while(_5a);}},cssText:""};function _51(_65){this.caller=_65;this.args=[];};var _66=_51.prototype=new _48;_66.declareProperty=_66.setValue=function(_67,_68){this.args.push(_68);};_66.toString=function(){var _69=this.operator;return _69+this.args+_9[_69];};var _6a,_6b=new _48;_6b.root=true;_6b.properties={Math:Math,module:function(mid){return {then:function(_6c){_1([mid],_6c);}};},item:{forElement:function(_6d){while(!_6d.item){_6d=_6d.parentNode;}return {element:_6d,receive:function(_6e){_6e(_6d.item);}};}},prefix:{put:function(_6f,_70,_71){if(typeof _1c.style[_25+_71]=="string"){return _70.addSheetRule(_70.selector,_25+_71+":"+_6f);}}},"var":{put:function(_72,_73,_74){(_73.variables||(_73.variables={}))[_74]=_72;var _75=_73.variableListeners;_75=_75&&_75[_74]||0;for(var i=0;i<_75.length;i++){_75[i](_72);}},call:function(_76,_77,_78,_79){this.receive(function(_7a){_77.addSheetRule(_77.selector,_78+": "+_79.toString().replace(/var\([^)]+\)/g,_7a));},_77,_76.args[0]);},receive:function(_7b,_7c,_7d){var _7e=_7c;do{var _7f=_7e.variables&&_7e.variables[_7d];if(_7f){var _80=_7e.variableListeners||(_7e.variableListeners={});(_80[_7d]||(_80[_7d]=[])).push(_7b);return _7b(_7f);}_7e=_7e.parent;}while(_7e);_7b();}},on:{put:function(_81,_82,_83){_f8(_82,_83,_81);}}};_6b.css=_32;_6b.parse=_84;function _85(_86,_87){_87.onRule();var _88=_38.selector[_86];if(_88){_89(_88,"onRule",_87);}};function _8a(_8b,_8c){var _8d=_38["function"][_8b];if(_8d){_89(_8d,"onCall",_8b,_8c,_8c.args);}};function _8e(_8f,_90){var _91=_38.pseudo[_8f];if(_91){_89(_91,"onPseudo",_8f,_90);}};function _89(_92,_93,_94,_95){if(_92){var _96=_6a;var _97=function(_98){if(typeof _98=="string"){_33.addRule(_96.fullSelector(),_98);}_ba();};_46++;var _99=function(_9a){try{var _9b=_9a[_93](_94,_95,_96,_33);if(_96 instanceof _51){_96.result=_9b;}if(_9b&&_9b.then){_9b.then(_97,_9c);}else{_97(_9b);}}catch(e){_9c(e);}function _9c(_9d){console.error("Error occurred processing "+_93.slice(2).toLowerCase()+" "+_94+(_96.operator=="{"?(" in rule \""+_96.selector+"\" {"+_96.cssText):"")+". "+_9d.message);if(_9d){console.error(_9d);}};};typeof _92=="string"?_1([_92],_99):_99(_92);}};var _9e=[_6b];function _84(_9f,_a0){function _a1(_a2,_a3){if(!_a3){_a4+=_a2;}if(_a5){_a5.push?typeof _a5[_a5.length-1]=="string"&&typeof _a2=="string"?_a5[_a5.length-1]+=_a2:_a2&&_a5.push(_a2):typeof _a5=="string"&&typeof _a2=="string"?_a5+=_a2:_a5=_21([_a5,_a2]);}else{_a5=_a2;}};_6a=_6b;_3.lastIndex=0;var _a6=0,_a7=true,_a4="",_a8=true;while(true){var _a9=_3.exec(_9f);var _aa=_a9[4],_ab=_a9[1],_ac=_a9[2],_ad=_a9[3],_ae,_af,_a5,_b0;_ad=_ad&&_1a(_ad);_ab=_1a(_ab);if(_a8){if(_ac){_a4=_af=_ab;_ae=_ac.charAt(0);_b0=_ac.charAt(1)=="?";}else{_a4=_ad=_ab;}_a5=_ad;if(_af||_aa!="/"){_a8=false;}}else{_ad=_ad?_ab+_ac:_ab;_a1(_ad);}switch(_aa){case "'":case "\"":var _b1=_aa=="'"?_4:_5;_b1.lastIndex=_3.lastIndex;var _b2=_b1.exec(_9f);if(!_b2){error("unterminated string");}var str=_b2[1];_3.lastIndex=_b1.lastIndex;_a1(new _23(str));continue;case "/":if(_9f[_3.lastIndex]=="*"){_6.lastIndex=_3.lastIndex+1;_6.exec(_9f);_3.lastIndex=_6.lastIndex;}else{_a1("/");}continue;case "\\":var _b3=_b1.lastIndex++;_a1(_9f.charAt(_b3));continue;case "(":case "{":case "[":var _b4;var _b5=false;if(_aa=="{"){_a8=true;_a1(_b4=_6a.newRule(_a4),true);if(_ae){_a7=false;if(!_ac||_ac.charAt(1)==">"){_a5.creating=true;}if(_ae=="="&&_ad){_b5=true;}}if(_6a.root&&_a7){_b4.cssRule=_a0.cssRules[_a6++];}}else{var _b6=_ad.match(/(.*?)([\w-]*)$/);_a1(_b4=_6a.newCall(_b6[2],_a5,_6a));_b4.ref=_126(_6a,_b6[2]);(_a5.calls||(_a5.calls=[])).push(_b4);}_b4.parent=_6a;if(_a5.creating){_b4.selector=".x-generated-"+_7++;}else{_b4.selector=_6a.root?_a4:_6a.selector+" "+_a4;}if(_b5){var ref=_126(_6a,_ad.match(/[^\s]+$/)[0],true);if(ref){_12a(ref,_b4);}}_6a.currentName=_af;_6a.currentSequence=_a5;_6a.assignmentOperator=_ae;_9e.push(_6a=_b4);_6a.operator=_aa;_6a.start=_3.lastIndex;_a4="";_6a.selector&&_6a.selector.replace(/:([-\w]+)/,function(t,_b7){_8e(_b7,_6a);});_af=null;_a5=null;continue;}if(_a5){var _ab=_a5[0];if(_ab.charAt&&_ab.charAt(0)=="@"){if(_a5[0].slice(1,7)=="import"){var _b8=_2f.getStyleSheet(_a0.cssRules[_a6++],_a5,_a0);_46++;var _b9=_3.lastIndex;_84(_b8.localSource,_b8);_3.lastIndex=_b9;}}else{try{_6a[_ae==":"?"setValue":"declareProperty"](_af,_a5,_b0);}catch(e){console.error(e.stack||e);}}}switch(_aa){case ":":_a8=true;_ae=":";break;case "}":case ")":case "]":if(_9[_6a.operator]!=_aa){console.error("Incorrect opening operator "+_6a.operator+" with closing operator "+_aa);}_af=null;_6a.cssText=_9f.slice(_6a.start,_3.lastIndex-1);if(_aa=="}"){_85(_6a.selector,_6a);_a7=true;_a4="";}_9e.pop();_6a=_9e[_9e.length-1];_a5=_6a.currentSequence;_af=_6a.currentName;_ae=_6a.assignmentOperator;if(_6a.root&&_aa=="}"){_a8=true;_ae=false;}break;case "":_34&&_34();return;case ";":_a5=null;_a8=true;_a7=false;_ae=false;_a4="";}}};_84(_32,_33);function _ba(){if(--_46==0){if(_34){_34(_33);}}};_ba(_6a);return _6b;};_a.addEventListener("change",function(_bb){var _bc=_bb.target;var _bd=_bc["-x-variable"];if(_bd.put){_bd.put(_bc.value);}});var _1c=_a.createElement("div");var _be={"dom-qsa2.1":!!_1c.querySelectorAll};function has(_bf){return _be[_bf];};var _c0=_1c.matches||_1c.matchesSelector||_1c.webkitMatchesSelector||_1c.mozMatchesSelector||_1c.msMatchesSelector||_1c.oMatchesSelector;var _c1=[];var _c2={},_c3={};var _c4=[];var _c5;function _c6(){_1d("link");_1d("style");if(!_c5){_c5=true;if(has("dom-qsa2.1")){for(var i=0,l=_c1.length;i<l;i++){_c7(_c1[i]);}_c8();}else{var all=_a.all;for(var i=0,l=all.length;i<l;i++){_c9(all[i]);}}}};if(/e/.test(_a.readyState||"")){setTimeout(_c6,200);}else{_a.addEventListener("DOMContentLoaded",_c6);}function _c7(_ca){var _cb=[];var _cc=_a.querySelectorAll(_ca.selector);var _cd=_ca.name;for(var i=0,l=_cc.length;i<l;i++){var _ce=_cc[i];var _cf=_ce.elementalStyle;var _d0=_ce.elementalSpecificities;if(!_cf){_cf=_ce.elementalStyle={};_d0=_ce.elementalSpecificities={};}if(true||_d0[_cd]<=_ca.specificity){var _d1=_ce.renderings;if(!_d1){_d1=_ce.renderings=[];_c4.push(_ce);}_d1.push({name:_cd,rendered:_cf[_cd]==_ca.propertyValue,renderer:_ca});_cf[_cd]=_ca.propertyValue;}}};var _d2;function _c8(){for(var i=0;i<_c4.length;i++){var _d3=_c4[i];var _d4=_d3.renderings,_d5=_d3.elementalStyle;delete _d3.renderings;for(var j=0;j<_d4.length;j++){var _d6=_d4[j];var _d7=_d6.renderer;var _d8=_d7.rendered;_d2=_d5[_d6.name]==_d7.propertyValue;if(!_d8&&_d2){try{_d7.render(_d3);}catch(e){console.error(e,e.stack);_2(_d3,"div.error",e.toString());}}if(_d8&&!_d2&&_d7.unrender){_d7.unrender(_d3);_d4.splice(j--,1);}}}_c4=[];};function _d9(_da,_db){for(var i=0,l=_db.length;i<l;i++){_db[i](_da);}};function _c9(_dc,_dd){for(var i=0,l=_c1.length;i<l;i++){var _de=_c1[i];if((!_dd||(_dd==_de.selector))&&(_c0?_c0.call(_dc,_de.selector):_dc.currentStyle[_de.name]==_de.propertyValue)){_de.render(_dc);}}};function _df(_e0,_e1){var id=_7++;_e0=_e0.sort?_e0:[_e0];return function(_e2,_e3){var _e4=_e2;var _e5=0;for(var i=0,l=_e0.length;i<l;i++){var _e6=_e0[i];try{if(_e6.eachProperty){if(_e6.args){if(_e6.operator=="("){var _e7=_e0[i+1];if(_e7&&_e7.eachProperty){_2(_e4,_e7.selector);}var _e8=_e6.args.toString();var _e9=_f8(_e6,0,_e8);(function(_ea,_eb){_b(_e9,function(_ec){if(_ec.forElement){_ec=_ec.forElement(_eb);}var _ed=_ea.appendChild(_a.createTextNode("Loading"));_ec.receive(function(_ee){if(_ee&&_ee.sort){if(_ed){_ed.parentNode.removeChild(_ed);_ed=null;}var _ef=_e7&&_e7.eachProperty&&_e7.get("each");if(_ef){_ef=_df(_ef,_e7);}_ee.forEach(_ef?function(_f0){_ef(_ea,_f0);}:function(_f1){_2(_ea,_8[_ea.tagName]||"div",_f1);});}else{if("value" in _ea){_ea.value=_ee;_ea["-x-variable"]=_ec;}else{_ed.nodeValue=_ee;}}},_e1,_e8);});})(_e4,_e2);}else{_2(_e4,_e6.toString());}}else{_2(_e4,_e6.selector);_f7.update(_e4,_e6.selector);}}else{if(typeof _e6=="string"){if(_e6.charAt(0)=="="){_e6=_e6.slice(1);}var _f2=_e6.split(",");for(var j=0,cl=_f2.length;j<cl;j++){var _f3=_f2[j].trim();var _f4=null;if(_f3){_f3=_f3.replace(/\([^)]*\)/,function(_f5){_f4=_f5;});var _f6=_2(j==0?_e4:_e2,_f3);if(_e3){_f6.item=_e3;}var _e7=_e0[i+1];if(_f6!=_e4&&(!_e7||!_e7.eachProperty)){_f7.update(_f6);}_e4=_f6;}}}else{_e4.appendChild(_a.createTextNode(_e6.value));}}}catch(e){console.error(e,e.stack);_e4.appendChild(_a.createTextNode(e));}}return _e4;};};function _f8(_f9,_fa,_fb){var _fc=_f9["var-expr-"+_fa];if(_fd){return _fc;}var _fd=[],_fe;_fd.id=_7++;var _ff,_100=[],id=0,_101=[],_102,_103=_fb.join?_fb.join(""):_fb.toString(),_104=_103.match(/^[\w_$\/\.-]*$/);_103=_103.replace(/("[^\"]*")|([\w_$\.\/-]+)/g,function(t,_105,_106){if(_106){_102=_106.split("/");var _107=_102.join("_");_100.push(_107);_fd.push(_102);var _108=_102[0];var _109=_126(_f9,_108);if(typeof _109=="string"||_109 instanceof Array){_109=_f8(_f9,_108,_109);}else{if(!_109){throw new Error("Could not find reference \""+_108+"\"");}}if(_109.forElement){_fe=true;}_102[0]=_109;return _107;}return t;});if(_104){if(_fa){var _10a=function(_10b,name,_10c){_b(findAttributeInAncestors(_10b,_102[0],_102[1]),function(_10d){for(var i=2;i<_102.length-1;i++){var name=_102[i];_10d=_10d.get?_10d.get(name):_10d[name];}var name=_102[i];if(_10d.set){_10d.set(name,_10c);}else{_10d[name]=_10c;}});};_10a.rule=_f9;}}else{var _10e=Function.apply(this,_100.concat(["return xstyleReturn("+_103+")"]));}_fd.func=_10e;_f9["var-expr-"+_fa]=_fd;function _10f(){var _110=_fd.length+1;var _111=[],_101=[];var _112,_113;var done=function(i){return function(_114){_111[i]=_114;_110--;if(_110<=0){_113=true;_112=_10e?_10e.apply(this,_111):_111[0];for(var j=0;j<_101.length;j++){_101[j](_112);}}};};if(_10e){for(var i=0;i<_fd.length;i++){var _115=_fd[i];_e(_115[0],_115.slice(1),done(i));}}else{var _115=_fd[0];var _116={then:function(_117){_101.push(_117);}};_b(_115[0],function(_118){_116=_118;for(var j=1;j<_115.length;j++){if(_116&&_116.get){_116=_116.get(_115[j]);}else{_116={receive:function(_119){_e(_118,_115.slice(1),_119);},put:function(_11a){set(resolve,_115.slice(1),_11a);}};break;}}for(var j=0;j<_101.length;j++){_101[j](_116);}});return _116;if(first&&first.then){return {then:function(_11b){_e(_115[0],_115.slice(1),_11b);}};}else{return _115;}}done(-1)();if(_112&&_112.then){return _112;}return {receive:function(_11c){if(_101){_101.push(_11c);}if(_113){_11c(_112);}}};};return _f9["var-expr-"+_fa]=_fe?{forElement:function(_11d){var _11e=[];var _11f;var _120=[];var _121=_11d;while(!_c0.call(_11d,_f9.selector)){_11d=_11d.parentNode;}for(var i=0;i<_fd.length;i++){var _122=_fd[i];var _123=_122[0];if(_123.forElement){_123=_122[0]=_123.forElement(_121);}var _124=_123.element;if(_121!=_11f){while(_121!=_124){if(_121==_11f){return;}_121=_121.parentNode;}_11f=_121;}}var _125=_11f["expr-result-"+_fd.id];if(!_125){_11f["expr-result-"+_fd.id]=_125=_10f();_125.element=_11f;}return _125;}}:_10f();};function _126(rule,name,_127){var _128=rule;do{var _129=_128.properties&&_128.properties[name]||(_127&&_128.rules&&_128.rules[name]);_128=_128.parent;}while(!_129&&_128);return _129;};function _12a(base,_12b){var _12c=base.cssText;_12b.cssText+=_12c;"values,properties,variables,calls".replace(/\w+/g,function(_12d){if(base[_12d]){_12b[_12d]=Object.create(base[_12d]);}});var _12e=_12b.getCssRule();base.eachProperty(function(name,_12f){_12b.setValue(name,_12f);if(name){var _130=_12e.style;if(!_130[name]){_130[name]=_12f;}}});if(base.generator){_12b.declareProperty(null,base.generator);}};var _f7={process:_1f,vendorPrefix:_25,applyProperty:function(name,_131){if(name=="opacity"&&_25=="-ms-"){return "filter: alpha(opacity="+(_131*100)+"); zoom: 1;";}return _25+name+":"+_131+";";},onFunction:function(name,_132,rule){},onCall:function(name,rule){var args=rule.args;var _133=rule.parent;function _134(){var _135=_133;var _136=name=="extends"?"rules":"variables";do{if(!_135){throw new Error("Could not find \""+args[0]+"\" in the defined "+_136);}var _137=_135[_136]&&_135[_136][args[0]];_135=_135.parent;}while(!_137);return _137;};if(name=="extends"){var _138=_134();_12a(_138,_133);}else{if(name=="var"){return function(_139){_139.addSheetRule(_139.selector,_139.currentName+": "+_139.currentSequence.toString().replace(/var\([^)]+\)/g,_134()));};}}},parse:_2f,addRenderer:function(_13a,_13b,rule,_13c){var _13d={selector:rule.selector,propertyValue:_13b,name:_13a,render:_13c};_c1.push(_13d);if(_c5){_c7(_13d);}_c8();},update:_c9,clearRenderers:function(){_c1=[];},load:function(_13e,_13f,_140,_141){_13f(["xstyle/css"],function(_142){_142.load(_13e,_13f,_140,_141);});}};return _f7;});xstyleReturn=function(_143){if(arguments.length==1){return _143;}return [].slice.call(arguments);};