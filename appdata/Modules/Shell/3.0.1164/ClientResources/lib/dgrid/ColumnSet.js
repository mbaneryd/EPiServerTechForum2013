//>>built
define("dgrid/ColumnSet",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/query","dojo/has","./util/misc","put-selector/put","xstyle/has-class","./Grid","dojo/_base/sniff","xstyle/css!./css/columnset.css"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){_8.add("event-mousewheel",function(_d,_e,_f){return typeof _f.onmousewheel!=="undefined";});_8.add("event-wheel",function(_10,_11,_12){var _13=false;try{WheelEvent("wheel");_13=true;}catch(e){}finally{return _13;}});var _14="data-dgrid-column-set-id";_b("safari","ie-7");function _15(_16,row){var _17=_16._columnSetScrollLefts;function _18(){_7(".dgrid-column-set",row).forEach(function(_19){_19.scrollLeft=_17[_19.getAttribute(_14)];});};if(_8("ie")<8||_8("quirks")){setTimeout(_18,1);}else{_18();}};function _1a(_1b,_1c,_1d){var id=_1c.getAttribute(_14),_1e=_1b._columnSetScrollers[id],_1f=_1e.scrollLeft+_1d;_1e.scrollLeft=_1f<0?0:_1f;};var _20;if(!_8("touch")){_20=_8("event-mousewheel")||_8("event-wheel")?function(_21){return function(_22,_23){return _5(_22,_8("event-wheel")?"wheel":"mousewheel",function(_24){var _25=_24.target,_26;if(_25.nodeType!==1){_25=_25.parentNode;}while(!_7.matches(_25,".dgrid-column-set["+_14+"]",_22)){if(_25===_22||!(_25=_25.parentNode)){return;}}_26=_24.deltaX||-_24.wheelDeltaX/3;if(_26){_23.call(null,_21,_25,_26);}});};}:function(_27){return function(_28,_29){return _5(_28,".dgrid-column-set["+_14+"]:MozMousePixelScroll",function(_2a){if(_2a.axis===1){_29.call(null,_27,this,_2a.detail);}});};};}return _2(null,{postCreate:function(){this.inherited(arguments);if(!_8("touch")){this.on(_20(this),function(_2b,_2c,_2d){var id=_2c.getAttribute(_14),_2e=_2b._columnSetScrollers[id],_2f=_2e.scrollLeft+_2d;_2e.scrollLeft=_2f<0?0:_2f;});}},columnSets:[],createRowCells:function(tag,_30){var row=_a("table.dgrid-row-table");var tr=_a(row,"tbody tr");for(var i=0,l=this.columnSets.length;i<l;i++){var _31=_a(tr,tag+".dgrid-column-set-cell.dgrid-column-set-"+i+" div.dgrid-column-set["+_14+"="+i+"]");_31.appendChild(this.inherited(arguments,[tag,_30,this.columnSets[i]]));}return row;},renderArray:function(){var _32=this,_33=this.inherited(arguments);_4.when(_33,function(_34){for(var i=0;i<_34.length;i++){_15(_32,_34[i]);}});return _33;},renderHeader:function(){this.inherited(arguments);var _35=this.columnSets,_36=this.domNode,_37=this._columnSetScrollers,_38=this._columnSetScrollerContents={},_39=this._columnSetScrollLefts={},_3a=this,i,l;function _3b(){_3a._positionScrollers();};if(_37){for(i in _37){_a(_37[i],"!");}}else{_6.after(this,"resize",_3b,true);_6.after(this,"styleColumn",_3b,true);_5(_36,".dgrid-column-set:dgrid-cellfocusin",_3.hitch(this,"_onColumnSetScroll"));}_37=this._columnSetScrollers={};for(i=0,l=_35.length;i<l;i++){this._putScroller(_35[i],i);}this._positionScrollers();},styleColumnSet:function(_3c,css){var _3d=this.addCssRule("#"+_9.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-set-"+_3c,css);this._positionScrollers();return _3d;},_destroyColumns:function(){var _3e=this.columnSets.length,i,j,k,_3f,len,_40,_41,_42;for(i=0;i<_3e;i++){_40=this.columnSets[i];for(j=0,_3f=_40.length;j<_3f;j++){_41=_40[j];for(k=0,len=_41.length;k<len;k++){_42=_41[k];if(typeof _42.destroy==="function"){_42.destroy();}}}}this.inherited(arguments);},configStructure:function(){this.columns={};for(var i=0,l=this.columnSets.length;i<l;i++){var _43=this.columnSets[i];for(var j=0;j<_43.length;j++){_43[j]=this._configColumns(i+"-"+j+"-",_43[j]);}}},_positionScrollers:function(){var _44=this.domNode,_45=this._columnSetScrollers,_46=this._columnSetScrollerContents,_47=this.columnSets,_48=0,_49=0,_4a=0,i,l,_4b,_4c;for(i=0,l=_47.length;i<l;i++){_48+=_49;_4b=_7(".dgrid-column-set["+_14+"=\""+i+"\"]",_44)[0];_49=_4b.offsetWidth;_4c=_4b.firstChild.offsetWidth;_46[i].style.width=_4c+"px";_45[i].style.width=_49+"px";_45[i].style.bottom=this.showFooter?this.footerNode.offsetHeight+"px":"0px";_45[i].style.overflowX=_4c>_49?"scroll":"auto";_45[i].style.left=_48+"px";if(_4c>_49){_4a++;}}this.bodyNode.style.bottom=_4a?(_8("dom-scrollbar-height")+(_8("ie")?1:0)+"px"):"0";},_putScroller:function(_4d,i){var _4e=this._columnSetScrollers[i]=_a(this.domNode,"div.dgrid-column-set-scroller.dgrid-column-set-scroller-"+i+"["+_14+"="+i+"]");this._columnSetScrollerContents[i]=_a(_4e,"div.dgrid-column-set-scroller-content");_5(_4e,"scroll",_3.hitch(this,"_onColumnSetScroll"));},_onColumnSetScroll:function(evt){var _4f=evt.target.scrollLeft,_50=evt.target.getAttribute(_14),_51;if(this._columnSetScrollLefts[_50]!=_4f){_7(".dgrid-column-set["+_14+"=\""+_50+"\"],.dgrid-column-set-scroller["+_14+"=\""+_50+"\"]",this.domNode).forEach(function(_52,i){_52.scrollLeft=_4f;if(!i){_51=_52.scrollLeft;}});this._columnSetScrollLefts[_50]=_51;}},_setColumnSets:function(_53){this._destroyColumns();this.columnSets=_53;this._updateColumns();},setColumnSets:function(_54){_1.deprecated("setColumnSets(...)","use set(\"columnSets\", ...) instead","dgrid 0.4");this.set("columnSets",_54);}});});