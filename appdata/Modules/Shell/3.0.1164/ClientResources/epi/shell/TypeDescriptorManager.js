//>>built
define("epi/shell/TypeDescriptorManager",["dojo","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/when","epi/dependency","epi/i18n!epi/shell/ui/nls/contenttypes"],function(_1,_2,_3,_4,_5,_6,_7){return {_uiDescriptors:{},resources:_7,store:null,initialize:function(){this.store=this.store||(function(){var _8=_6.resolve("epi.storeregistry");return _8.get("epi.shell.uidescriptor");})();return _5(this.store.query(),_4.hitch(this,function(_9){_2.forEach(_9,function(_a){this._uiDescriptors[_a.typeIdentifier]=_a;},this);}));},clear:function(){this._uiDescriptors={};},registerTypeSetting:function(_b,_c){this._uiDescriptors[_b]=_c;},getValue:function(_d,_e){var _f=this._uiDescriptors[_d];while(_f){var _10=_f[_e];if(_10||_10===false){return _10;}_f=this._uiDescriptors[_f["baseTypeIdentifier"]];}},getResourceValue:function(_11,_12,_13){var _14=this._uiDescriptors[_11];while(_14){var _15=this.resources[_14.languageKey];if(_15&&(_13?_14.isPrimaryType===true:true)){var _16=_4.getObject(_12,false,_15);if(_16){return _16;}}_14=this._uiDescriptors[_14["baseTypeIdentifier"]];}},getAndConcatenateValues:function(_17,_18){var _19=[],_1a=this._uiDescriptors[_17];while(_1a){var _1b=_1a[_18];if(_1b){if(_4.isArray(_1b)){_2.forEach(_1b,function(_1c){_19.push(_1c);});}else{_19.push(_1b);}}_1a=this._uiDescriptors[_1a["baseTypeIdentifier"]];}return _19;},getInheritanceChain:function(_1d){var _1e=[],_1f=this._uiDescriptors[_1d];while(_1f){_1e.push(_1f.typeIdentifier);_1f=this._uiDescriptors[_1f["baseTypeIdentifier"]];}return _1e;},isBaseTypeIdentifier:function(_20,_21){var _22=_20,_23;if(_20===_21){return true;}while(_23=this._uiDescriptors[_22]){_22=_23.baseTypeIdentifier;if(_22===_21){return true;}}return false;}};});