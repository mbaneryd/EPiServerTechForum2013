//>>built
define("epi/shell/widget/DateTimeSelectorDropDown",["dojo/_base/declare","dojo/_base/lang","dojo/keys","dijit/form/_DateTimeTextBox","epi/shell/widget/DateTimeSelector"],function(_1,_2,_3,_4,_5){return _1([_4],{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_5,forceWidth:false,_isSelecting:false,_canceled:false,_isDropDownShowing:false,constructor:function(){this.constraints={formatLength:"short",fullYear:"true"};},toggleDropDown:function(){this._isSelecting=!this._isSelecting;this.inherited(arguments);},openDropDown:function(){this.inherited(arguments);this.dropDown.onChange=function(){};this.connect(this.dropDown.domNode,"onkeypress",_2.hitch(this,function(e){this._canceled=e.keyCode===_3.ESCAPE;if(e.keyCode===_3.ESCAPE||e.keyCode===_3.ENTER){this._isSelecting=false;this.closeDropDown(true);}}));this._isSelecting=true;this._canceled=false;this._dropDownShowing=true;},closeDropDown:function(_6){if(!this._isSelecting){if(!this._canceled&&this.dropDown){this.set("value",this.dropDown.get("value"));}this.inherited(arguments);}this._dropDownShowing=false;},_onBlur:function(){this._isSelecting=false;if(this._dropDownShowing){this.closeDropDown();}else{if(this.dropDown&&!this.get("value")&&this.get("value")!==null){this.set("value",this.dropDown.get("value"));}}this.inherited(arguments);}});});