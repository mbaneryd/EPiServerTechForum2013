//>>built
define("epi/shell/widget/_AutoResizingIframeMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom-attr","dojo/dom-style","dojo/has","epi/shell/postMessage","epi/shell/widget/_ScrollbarMeasurementMixin"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_7],{onAfterResize:function(_8){},postCreate:function(){var _9=this;this.inherited(arguments);this.own(_6.subscribe("/site/resize",function(_a){_9.contentChange();}));},onUnload:function(){this.inherited(arguments);if(this._contentBox){_4.set(this.iframe,{width:this._contentBox.w+"px",height:this._contentBox.h+"px"});}},contentChange:function(){if(this._contentBox){this.resize(this._contentBox,true);}},resize:function(_b,_c){var _d=this,_e=this._resize(_b,_c);_e.then(function(_f){_d.onAfterResize(_f);});return _e;},_resize:function(_10,_11){var _12=this._contentBox||{h:0,w:0},_13=this,_14=new _2(),_15=new _2(),_16;function _17(_18,_19){if(_13.resizeThrottle){clearTimeout(_13.resizeThrottle);_13.resizeThrottle=null;}_13.resizeThrottle=setTimeout(function(){_4.set(_13.iframe,{width:(_18.w-_19)+"px",height:_18.h+"px"});_14.resolve();},50);return _14;};if(_11||(_10&&(_10.h!==_12.h||_10.w!==_12.w))){this._contentBox=_10;_16=!this.isInspectable()||_5("chrome")?0:this.getScrollbarSize().x;_17(_10,_16).then(function(){var _1a={h:0,w:0};if(_13.isInspectable()){_1a=_13._setToDocumentSize(_10,_16);}_15.resolve(_1a);});}return _15;},_setToDocumentSize:function(_1b,_1c){var _1d;this.setOverflow("visible");_1d=this._calculateActualSize();_1d.w+=_1c;if(_5("ie")<=10){this._removeScrollbars(_1d,_1b);}if(_1d.w>0&&_1d.h>0){_4.set(this.iframe,{width:_1d.w+"px",height:_1d.h+"px"});}this.setOverflow("hidden");_3.set(this.iframe,"data-epi-ipad-ping","pong");return _1d;},setOverflow:function(_1e){var doc=this.getDocument();if(doc&&doc.documentElement&&doc.body){_4.set(doc.documentElement,{overflow:_1e});_4.set(doc.body,{overflow:_1e});}},_removeScrollbars:function(_1f,_20){var _21=this.getScrollbarSize(),_22=_1f.h>_20.h,_23=_1f.w>_20.w;if(_22&&!_23){_1f.w-=_21.y;}if(_23&&!_22){_1f.h-=_21.x;}return _1f;}});});