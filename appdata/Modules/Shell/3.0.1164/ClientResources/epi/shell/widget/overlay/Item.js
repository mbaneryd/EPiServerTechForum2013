//>>built
define("epi/shell/widget/overlay/Item",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-style","dojo/mouse","dojo/on","dojo/when","dijit/_CssStateMixin","dijit/_TemplatedMixin","./_Base","epi/shell/dnd/Target"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b){return _2([_a,_9,_8],{baseClass:"epi-overlay-item",name:"",_setDisplayNameAttr:function(_c){if(this.informationNode){this.informationNode.textContent=_c;}},templateString:"<div data-dojo-attach-point=\"item\">                            <div data-dojo-attach-point=\"containerNode\" class=\"epi-overlay-item-container\">                                <span data-dojo-attach-point=\"informationNode\" class=\"epi-overlay-item-info\"></span>                                <div class=\"epi-overlay-bracket\"></div>                            </div>                        </div>",allowedDndTypes:null,error:false,childItems:null,parent:null,onClick:function(_d,e){},onDrop:function(_e,_f){},onMouseEnter:function(e){},onMouseLeave:function(e){},constructor:function(){this.childItems=[];},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"click",_3.hitch(this,function(e){this.onClick(this,e);})),on(this.domNode,_6.enter,_3.hitch(this,this.onMouseEnter)),on(this.domNode,_6.leave,_3.hitch(this,this.onMouseLeave)));this.transferDndControlTo(this);},destroy:function(){if(this.parent&&this.parent.removeChild){this.parent.removeChild(this);}for(var i=0;i<this.childItems.length;i++){this.childItems[i].destroyRecursive();}this.childItems=null;if(this._dropTarget){this._dropTarget.destroy();this._dropTarget=null;}this.inherited(arguments);},resize:function(_10){this.inherited(arguments);if(this.childItems){_1.forEach(this.childItems,function(_11,i){_11.resize();});}},updatePosition:function(_12){var _13=this.informationNode;if(_13){var _14=_5.get(_13,"minHeight");_4.toggle(_13,"epi-overlay-item-info--inside",_12.y<_14);}return this.inherited(arguments);},transferDndControlTo:function(_15){var _16=_15.allowedDndTypes,_17=_15.onDropData,_18=_15;if(!this._dropTarget){this._setupDnd(_18,_16,_17);}else{var _19=_16;this._dropTarget.accept={};if(_19){_19.forEach(function(_1a){this._dropTarget.accept[_1a]=1;},this);}}},onDropData:function(_1b,_1c,_1d,_1e){var _1f;if(_1b.length>1){_1f=_1b.data;}else{if(_1b.length===1){_1f=_1b[0].data;}}_7(_1f,_3.hitch(this,function(_20){var _21;if(this.dndSourcePropertyName){_21=_20[this.dndSourcePropertyName];}else{_21=_20;}this.onDrop(this,_21);}));},_setupDnd:function(_22,_23,_24){if(_23){this._dropTarget=new _b(this.domNode,{accept:_23,createItemOnDrop:false});this._dropDataHandler=this.connect(this._dropTarget,"onDropData",_3.hitch(_22,_24));this.own(this._dropTarget,this._dropDataHandler);}},_setReadOnlyAttr:function(_25){this._set("readOnly",_25);if(this._dropTarget){this._dropTarget.readOnly=_25;}},_setErrorAttr:function(_26){this.set("state",_26?"Error":"");this._set("error",_26);}});});