//>>built
require({cache:{"epi-packaging/layers/packaging":function(){require(["epi-packaging/AntiForgeryData","epi-packaging/DetailedView","epi-packaging/GallerySection","epi-packaging/InstalledSection","epi-packaging/LinkButton","epi-packaging/ModulesList","epi-packaging/ModuleSummary","epi-packaging/NavigationMenu","epi-packaging/PackagesGrid","epi-packaging/PackageUpload","epi-packaging/RestartSite","epi-packaging/RootContainer","epi-packaging/SelectedFiles","epi-packaging/SiteRestartWarning","epi-packaging/Toolbar","epi-packaging/UpdateableSection","epi-packaging/UploadResults","epi-packaging/UploadSection","epi/shell/widget/ApplicationContentPane"]);},"epi-packaging/AntiForgeryData":function(){define("epi-packaging/AntiForgeryData",["dojo"],function(_1){return _1.declare(null,{_keyName:null,_keyValue:null,_antiForgeryToken:null,constructor:function(_2){var _3=_1.create("div");this._antiForgeryToken=_2;_3.innerHTML=this._antiForgeryToken;var _4=_1.query("input",_3)[0];this._keyName=_1.attr(_4,"name");this._keyValue=_1.attr(_4,"value");},GetKeyName:function(){return this._keyName;},GetKeyValue:function(){return this._keyValue;},GetTokenNode:function(){return this._antiForgeryToken;},AddAntiforgeryToken:function(_5){var _6={};_6[this._keyName]=this._keyValue;_1.mixin(_5,_6);return _5;}});});},"epi-packaging/DetailedView":function(){require({cache:{"url:epi-packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit/layout/TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dialogPadding epi-dependenciesTabContainer\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi-packaging/DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>"}});define("epi-packaging/DetailedView",["epi","epi/datetime","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-style","dijit","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/_LayoutWidget","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/shell/widget/_ActionProviderWidget","dojo/text!./templates/DetailedView.htm","epi-packaging/DependenciesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView"],function(_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,res){return _a([_11,_f,_10,_14],{currentPackage:null,installHandler:null,updateHandler:null,unInstallHandler:null,disableHandler:null,enableHandler:null,closeHandler:null,res:res,templateString:_15,_specItemTemplate:"<li>                                <span class='epi-specItemLabel'>{specItemLabel}</span>                                <span class='epi-specItemValue'>{specItemValue}</span>                            </li>",_toolbar:null,postCreate:function(){this.inherited(arguments);if(!this.currentPackage){return;}this._loadOverviewTabContent();this._loadSpecsTabContent();this._loadDependenciesTabContent();},startup:function(){this.inherited(arguments);},layout:function(){this.inherited(arguments);this._contentBox.h=_c.position(this.contentContainer.parentNode).h;this.tabContainer.resize(this._contentBox);if(!this.currentPackage||!this.currentPackage.dependencies||this.currentPackage.dependencies.length<1){this.dependenciesContent.innerHTML=this.res.tab.dependencies.nodependencies;}},_hideTab:function(_17){_9.forEach(this.tabContainer.tablist.getChildren(),_b.hitch(this,function(_18,_19,_1a){if(_18.label===_17){_d.set(_18.domNode,{display:"none"});return;}}));},_loadOverviewTabContent:function(){this.overviewAboutContent.innerHTML=this.currentPackage.description||"";this.overviewReleaseNotesContent.innerHTML=this.currentPackage.releaseNotes||"";},_loadDependenciesTabContent:function(){this.dependenciesList.data=this.currentPackage.dependencies;},_loadSpecsTabContent:function(){var _1b="";if(this.currentPackage.versionInstalled){if(this.currentPackage.version==this.currentPackage.versionLatestAvailable&&this.currentPackage.isInstalled){_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-installedStatusIcon'></span>"+this.res.tab.content.installed);}else{if(this.currentPackage.isDisabled){_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-disabledStatusIcon'></span>"+this.res.tab.content.disabled);}else{_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-newVersionStatusIcon'></span>"+_b.replace(this.res.tab.content.priorversioninstalled,{priorversion:this.currentPackage.versionInstalled}));}}}else{_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-notInstalledStatusIcon'></span>"+this.res.tab.content.notinstalled);}var _1c=_8.toUserFriendlyHtml(this.currentPackage.installDate);_1b+=this._addSpecItems(this.res.tab.content.installationdate,_1c||this.res.tab.content.notavailable);_1b+=this._addSpecItems(this.res.tab.content.installedby,this.currentPackage.installedBy||this.res.tab.content.notavailable);_1b+=this._addSpecItems(this.res.tab.content.version,this.currentPackage.version||"");_1b+=this._addSpecItems(this.res.tab.content.releaseby,this.currentPackage.authors||"");var _1d=_9.map(this.currentPackage.tags,function(_1e){return " \""+_1e+"\"";});_1b+=this._addSpecItems(this.res.tab.content.tags,_1d||"");this.specItemList.innerHTML=_1b;},_addSpecItems:function(_1f,_20){return _b.replace(this._specItemTemplate,{specItemLabel:_1f,specItemValue:_20});},getActions:function(){if(!this.currentPackage){return [];}this._actions=[];if(this.currentPackage.actionsAvailable.install){this.addActions({name:"install",label:_7.resources.action.install,action:_b.hitch(this,this.installHandler)});}if(this.currentPackage.actionsAvailable.update||this.currentPackage.actionsAvailable.installAsUpdate){this.addActions({name:"update",label:_7.resources.action.update,action:_b.hitch(this,this.updateHandler)});}if(this.currentPackage.actionsAvailable.enable){this.addActions({name:"enable",label:res.enablebutton,action:_b.hitch(this,this.enableHandler)});}if(this.currentPackage.actionsAvailable.disable){this.addActions({name:"disable",label:res.disablebutton,action:_b.hitch(this,this.disableHandler)});}if(this.currentPackage.actionsAvailable.uninstall){this.addActions({name:"uninstall",label:_7.resources.action.uninstall,action:_b.hitch(this,this.unInstallHandler)});}this.addActions({name:"close",label:_7.resources.action.close,action:_b.hitch(this,this._closeClick)});return this._actions;},_closeClick:function(){if(this.closeHandler){this.closeHandler();}}});});},"url:epi-packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit/layout/TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dialogPadding epi-dependenciesTabContainer\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi-packaging/DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>","epi-packaging/DependenciesGrid":function(){define("epi-packaging/DependenciesGrid",["dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dijit/_WidgetBase","dgrid/Grid","dgrid/extensions/DijitRegistry","dgrid/extensions/ColumnResizer","dijit/layout/ContentPane","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView.Tab.Dependencies"],function(_21,_22,_23,_24,_25,_26,_27,_28,res){return _21([_24],{res:res,data:null,gridWidget:null,postCreate:function(){this.inherited(arguments);var _29=_23.create("div");_23.place(_29,this.domNode);var _2a=_23.create("div",null,_29);var _2b={name:{label:res.name},version:{label:res.version},releasedBy:{label:res.releasedby}};this.gridWidget=new (_21([_25,_26,_27]))({columns:_2b},_2a);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.data&&this.data.length>0){this.gridWidget.renderArray(this.data);}else{_22.set(this.gridWidget.domNode,{display:"none"});}},resize:function(_2c){this.inherited(arguments);this.gridWidget.resize(_2c);}});});},"dgrid/extensions/ColumnResizer":function(){define("dgrid/extensions/ColumnResizer",["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/has","../util/misc","put-selector/put","dojo/_base/html","xstyle/css!../css/extensions/ColumnResizer.css"],function(_2d,_2e,_2f,_30,dom,_31,has,_32,put){function _33(_34,_35,_36,_37,id){for(var i=1;i<_35;i++){_34[_36+i][_37]=id;}};function _38(_39){var i=_39.length,l=i,_3a=_39[0].length,_3b=new Array(i);while(i--){_3b[i]=new Array(_3a);}var _3c={};for(i=0;i<l;i++){var row=_3b[i],_3d=_39[i];for(var j=0,js=0;j<_3a;j++){var _3e=_3d[js],k;if(typeof row[j]!="undefined"){continue;}row[j]=_3e.id;if(_3e.rowSpan&&_3e.rowSpan>1){_33(_3b,_3e.rowSpan,i,j,_3e.id);}if(i>0&&_3e.colSpan&&_3e.colSpan>1){for(k=1;k<_3e.colSpan;k++){row[++j]=_3e.id;if(_3e.rowSpan&&_3e.rowSpan>1){_33(_3b,_3e.rowSpan,i,j,_3e.id);}}}_3c[_3e.id]=_39[0][j].id;js++;}}return _3c;};function _3f(_40,_41,_42,_43){if(_42<=0){return;}var _44=_40.columns[_41],_45={grid:_40,columnId:_41,width:_42,bubbles:true,cancelable:true},_46;if(_43){_45.parentType=_43;}if(!_40._resizedColumns||_2e.emit(_40.headerNode,"dgrid-columnresize",_45)){if(_42==="auto"){delete _44.width;}else{_44.width=_42;_42+="px";}_46=_40._columnSizes[_41];if(_46){_46.set("width",_42);}else{_46=_32.addCssRule("#"+_32.escapeCssIdentifier(_40.domNode.id)+" .dgrid-column-"+_41,"width: "+_42+";");}_40._columnSizes[_41]=_46;_40.resize();return true;}};var _47,_48=0;var _49={create:function(){_47=put("div.dgrid-column-resizer");},destroy:function(){put(_47,"!");_47=null;},show:function(_4a){var pos=_31.position(_4a.domNode,true);_47.style.top=pos.y+"px";_47.style.height=pos.h+"px";put(document.body,_47);},move:function(x){_47.style.left=x+"px";},hide:function(){_47.parentNode.removeChild(_47);}};return _2d(null,{resizeNode:null,minWidth:40,adjustLastColumn:true,_resizedColumns:false,buildRendering:function(){this.inherited(arguments);if(!_48++){_49.create();}},destroy:function(){this.inherited(arguments);for(var _4b in this._columnSizes){this._columnSizes[_4b].remove();}if(!--_48){_49.destroy();}},resizeColumnWidth:function(_4c,_4d){return _3f(this,_4c,_4d);},configStructure:function(){var _4e=this._oldColumnSizes=_30.mixin({},this._columnSizes),k;this._resizedColumns=false;this._columnSizes={};this.inherited(arguments);for(k in _4e){if(!(k in this._columnSizes)){_4e[k].remove();}}delete this._oldColumnSizes;},_configColumn:function(_4f){this.inherited(arguments);var _50=_4f.id,_51;if("width" in _4f){if((_51=this._oldColumnSizes[_50])){_51.set("width",_4f.width+"px");}else{_51=_32.addCssRule("#"+this.domNode.id+" .dgrid-column-"+_50,"width: "+_4f.width+"px;");}this._columnSizes[_50]=_51;}},renderHeader:function(){this.inherited(arguments);var _52=this;var _53;if(this.columnSets&&this.columnSets.length){var csi=this.columnSets.length;while(csi--){_53=_30.mixin(_53||{},_38(this.columnSets[csi]));}}else{if(this.subRows&&this.subRows.length>1){_53=_38(this.subRows);}}var _54=_2f(".dgrid-cell",_52.headerNode),i=_54.length;while(i--){var _55=_54[i],id=_55.columnId,col=_52.columns[id],_56=_55.childNodes;if(!col||col.resizable===false){continue;}var _57=put("div.dgrid-resize-header-container");_55.contents=_57;while(_56.length>0){put(_57,_56[0]);}put(_55,_57,"div.dgrid-resize-handle.resizeNode-"+id).columnId=_53?_53[id]:id;}if(!_52.mouseMoveListen){_2e(_52.headerNode,".dgrid-resize-handle:mousedown"+(has("touch")?",.dgrid-resize-handle:touchstart":""),function(e){_52._resizeMouseDown(e,this);_52.mouseMoveListen.resume();_52.mouseUpListen.resume();});_52._listeners.push(_52.mouseMoveListen=_2e.pausable(document,"mousemove"+(has("touch")?",touchmove":""),_32.throttleDelayed(function(e){_52._updateResizerPosition(e);})));_52._listeners.push(_52.mouseUpListen=_2e.pausable(document,"mouseup"+(has("touch")?",touchend":""),function(e){_52._resizeMouseUp(e);_52.mouseMoveListen.pause();_52.mouseUpListen.pause();}));_52.mouseMoveListen.pause();_52.mouseUpListen.pause();}},_resizeMouseDown:function(e,_58){e.preventDefault();dom.setSelectable(this.domNode,false);this._startX=this._getResizeMouseLocation(e);this._targetCell=_2f(".dgrid-column-"+_58.columnId,this.headerNode)[0];this._updateResizerPosition(e);_49.show(this);},_resizeMouseUp:function(e){var _59=this._columnSizes,_5a,_5b,_5c;if(this.adjustLastColumn){_5c=this.headerNode.clientWidth-1;}if(!this._resizedColumns){_5a=_2f(".dgrid-cell",this.headerNode);if(this.columnSets&&this.columnSets.length){_5a=_5a.filter(function(_5d){var idx=_5d.columnId.split("-");return idx[0]=="0"&&!(_5d.columnId in _59);});}else{if(this.subRows&&this.subRows.length>1){_5a=_5a.filter(function(_5e){return _5e.columnId.charAt(0)=="0"&&!(_5e.columnId in _59);});}}_5b=_5a.map(function(_5f){return _5f.offsetWidth;});_5a.forEach(function(_60,i){this.resizeColumnWidth(_60.columnId,_5b[i]);},this);this._resizedColumns=true;}dom.setSelectable(this.domNode,true);var _61=this._targetCell,_62=this._getResizeMouseLocation(e)-this._startX,_63=_61.offsetWidth+_62,obj=this._getResizedColumnWidths(),_64=obj.totalWidth,_65=obj.lastColId,_66=_2f(".dgrid-column-"+_65,this.headerNode)[0].offsetWidth;if(_63<this.minWidth){_63=this.minWidth;}if(_3f(this,_61.columnId,_63,e.type)){if(_61.columnId!=_65&&this.adjustLastColumn){if(_64+_62<_5c){_3f(this,_65,"auto",e.type);}else{if(_66-_62<=this.minWidth){_3f(this,_65,this.minWidth,e.type);}}}}_49.hide();delete this._startX;delete this._targetCell;},_updateResizerPosition:function(e){if(!this._targetCell){return;}var _67=this._getResizeMouseLocation(e),_68=_67-this._startX,_69=this._targetCell.offsetWidth,_6a=_67;if(_69+_68<this.minWidth){_6a=this._startX-(_69-this.minWidth);}_49.move(_6a);},_getResizeMouseLocation:function(e){var _6b=0;if(e.pageX){_6b=e.pageX;}else{if(e.clientX){_6b=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;}}return _6b;},_getResizedColumnWidths:function(){var _6c=0,_6d=_2f(".dgrid-cell",this.headerNode);if(this.columnSets&&this.columnSets.length){_6d=_6d.filter(function(_6e){var idx=_6e.columnId.split("-");return idx[1]=="0";});}else{if(this.subRows&&this.subRows.length>1){_6d=_6d.filter(function(_6f){return _6f.columnId.charAt(0)=="0";});}}var i=_6d.length;if(!i){return {};}var _70=_6d[i-1].columnId;while(i--){_6c+=_6d[i].offsetWidth;}return {totalWidth:_6c,lastColId:_70};}});});},"epi-packaging/GallerySection":function(){require({cache:{"url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi-packaging/GallerySection",["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi/routes","epi-packaging/SectionHeader","epi-packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.GallerySection","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(_71,_72,_73,_74,_75,_76,_77,_78,res,_79){return _71.declare([_73,_74],{res:res,resFeeds:_79,templateString:_78,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _76({webHelpAlias:"availableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _77({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:false,emptyListMessage:this.res.emptylistmessage,listingUrl:_75.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstallableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_7a){this._headerWidget.addErrorMessages(_7a);});this.connect(this._listWidget,"onSuccess",function(_7b){this._headerWidget.addSuccessMessages(_7b);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(_7c){var _7d=this.resFeeds[_7c.feedName.toLowerCase()];this._headerWidget.sectionTitle=_7d?_7d.title:_7c.feedName;this._headerWidget.description=_7d?_7d.description:"";this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.feedName=_7c.feedName;this._listWidget.updateView();}});});},"epi-packaging/SectionHeader":function(){define(["dojo","dijit","dojo/cookie","dojo/html","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","epi/shell/widget/HelpButton","epi-packaging/StatusMessageList","epi-packaging/RestartSite","dojox/widget/Standby","dojo/text!./templates/SectionHeader.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SectionHeader"],function(_7e,_7f,_80,_81,_82,_83,_84,_85,_86,_87,_88,_89,_8a,res){return _7e.declare([_82,_83,_84],{res:res,templateString:_8a,sectionTitle:null,description:null,_titleNode:null,_descriptionNode:null,webHelpAlias:null,antiForgeryData:null,_helpButtonWidget:null,_restartWidget:null,_standbyWidget:null,startup:function(){if(this._started){return;}this._helpButtonWidget=new _86({moduleName:"Shell",webHelpAlias:this.webHelpAlias},this._helpButton);this._helpButtonWidget.startup();this._restartWidget=new _88({antiForgeryData:this.antiForgeryData},this._restartPlaceholder);this._restartWidget.startup();this.connect(this._restartWidget,"onRestartFinished",function(){var _8b=this._getStoredMessages();if(_8b){this._setReloadRequested();window.location.reload(true);}});this.connect(this._restartWidget,"onRestartCheckComplete",function(_8c){var _8d=this._getStoredMessages();if(_8d&&!_8c&&!this._isReloadRequested()){this._setReloadRequested();window.location.reload(true);}});this._standbyWidget=new _89({target:this._standbyPlaceholder});document.body.appendChild(this._standbyWidget.domNode);this._standbyWidget.startup();_7e.subscribe("onServerError",_7e.hitch(this,this._showServerError));_7e.subscribe("onReloadRequired",_7e.hitch(this,this._storeMessages));this.inherited(arguments);},updateView:function(){_81.set(this._titleNode,this.sectionTitle);_81.set(this._descriptionNode,this.description);this._displayStoredMessage();this._restartWidget.showIfRestartRequired();},_isReloadRequested:function(){var _8e=this._getItem("EPiPackagingPageReload");return _8e==="true";},_setReloadRequested:function(){this._storeItem("EPiPackagingPageReload","true");},_clearReloadRequested:function(){this._removeItem("EPiPackagingPageReload");},_displayStoredMessage:function(){var _8f=this._getStoredMessages();if(this._isReloadRequested()&&_8f){this.addSuccessMessages(_8f);this._clearReloadRequested();this._clearStoredMessages();}},_storeMessages:function(){var _90=this._successMessageList.messages;if(_90.length>0){this._storeItem("EPiPackagingStatusMessage",_7e.toJson(_90));}},_getStoredMessages:function(){var _91=this._getItem("EPiPackagingStatusMessage");if(!_91){return null;}if(_91==""){return null;}return _7e.fromJson(_91);},_clearStoredMessages:function(){this._removeItem("EPiPackagingStatusMessage");},_storeItem:function(key,_92){if(localStorage!==undefined){localStorage.setItem(key,_92);}else{_7e.cookie(key,_92);}},_getItem:function(key){var _93;if(localStorage!==undefined){_93=localStorage.getItem(key);}else{_93=_7e.cookie(key);}return _93;},_removeItem:function(key){if(localStorage!==undefined){localStorage.removeItem(key);}else{_7e.cookie(key,"",{expire:-1});}},showStandby:function(){this._standbyWidget.show();},hideStandby:function(){this._standbyWidget.hide();},addErrorMessages:function(_94){if(this._isReloadRequested()){return;}this._errorMessageList.addMessages(_94);},clearErrorMessages:function(){this._errorMessageList.clearMessages();},addSuccessMessages:function(_95){this._successMessageList.addMessages(_95);},clearSuccessMessages:function(){this._successMessageList.clearMessages();},_showServerError:function(_96){if(_96.processed){return;}if(this._isReloadRequested()){return;}_96.processed=true;var _97;try{_97=_96.xhr.getResponseHeader("X-EPiLogOnScreen");}catch(ex){}if(_97){window.location.reload();return;}var _98=_96.xhr.responseText;var div=_7e.byId("errorContainerDialog");if(div){_7e.destroy(div);}div=_7e.create("div",{id:"errorContainerDialog"},_7e.body());var _99=_7e.create("iframe",{width:"800px",height:"400px",id:"erroriframe"},div);var _9a=new _85({title:this.res.servererror,style:"width: 820px",content:div});_9a.show();var doc=_99.contentWindow.document;doc.open();doc.writeln(_98);doc.close();}});});},"epi-packaging/StatusMessageList":function(){define(["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","epi"],function(_9b,_9c,_9d,_9e,epi){return _9b.declare([_9d,_9e],{templateString:"<div><ul data-dojo-attach-point=\"_errorList\"></ul></div>",messages:[],render:function(){_9b.empty(this._errorList);if(this.messages.length>0){_9b.forEach(this.messages,function(_9f){var li=_9b.create("li");li.innerHTML=_9f;this._errorList.appendChild(li);},this);_9b.style(this.domNode,"display","block");}else{_9b.style(this.domNode,"display","none");}},addMessages:function(_a0){for(i in _a0){this.messages.push(_a0[i]);}this.render();},clearMessages:function(){this.messages=[];this.render();}});});},"epi-packaging/RestartSite":function(){define("epi-packaging/RestartSite",["dojo","dijit","epi/routes","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","dojo/text!./templates/RestartSite.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.RestartSite"],function(_a1,_a2,_a3,_a4,_a5,_a6,_a7,_a8,res){return _a1.declare([_a4,_a5,_a6],{res:res,templateString:_a8,pingTimeout:5000,restartUrl:null,checkStatusUrl:null,antiForgeryData:null,_restartStandby:null,constructor:function(){if(_a3){this.restartUrl=_a3.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Restart"});this.checkStatusUrl=_a3.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"CheckRestartRequired"});}},postMixInProperties:function(){if(!this.restartUrl){console.error("restartUrl is not specified");}if(!this.checkStatusUrl){console.error("checkStatusUrl is not specified");}this.inherited(arguments);},startup:function(){_a1.connect(this.restartButton,"onClick",this,function(){this._requestRestart();});this.inherited(arguments);},hide:function(){_a1.style(this.domNode,"display","none");},show:function(){_a1.style(this.domNode,"display","block");},showIfRestartRequired:function(){var _a9={};this.antiForgeryData.AddAntiforgeryToken(_a9);_a1.xhrPost({content:_a9,url:this.checkStatusUrl,handleAs:"json",load:_a1.hitch(this,function(_aa){if(!_aa){return;}else{if(_aa.restartRequired==true){this.show();}else{this.hide();}this.onRestartCheckComplete(_aa.restartRequired==true);}}),error:_a1.hitch(this,function(err,_ab){_a1.publish("onServerError",[_ab]);this.hide();})});},onRestartFinished:function(){},onRestartCheckComplete:function(_ac){},_requestRestart:function(){if(!this._restartStandby){this._restartStandby=new _a7({target:this.domNode});document.body.appendChild(this._restartStandby.domNode);this._restartStandby.startup();}this._restartStandby.show();var _ad={};this.antiForgeryData.AddAntiforgeryToken(_ad);_a1.xhrPost({content:_ad,url:this.restartUrl,handleAs:"json",load:_a1.hitch(this,function(_ae,_af){if(_ae.restartRequired){this.counter=0;this._ping();}else{this._restartStandby.hide();alert(this.res.restartfailedmessage);}}),error:_a1.hitch(this,function(err,_b0){this._restartStandby.hide();_a1.publish("onServerError",[_b0]);}),handle:function(){}});},_ping:function(){this.counter++;if(this.counter>100){this._restartStandby.hide();return;}setTimeout(_a1.hitch(this,function(){var _b1={};this.antiForgeryData.AddAntiforgeryToken(_b1);_a1.xhrPost({content:_b1,url:this.checkStatusUrl,handleAs:"json",load:_a1.hitch(this,function(_b2,_b3){if(_b2.restartRequired==true){this._ping();}else{this._restartStandby.hide();this.hide();this.onRestartFinished();}}),error:_a1.hitch(this,function(err,_b4){if(_b4.xhr.status==500){this._restartStandby.hide();_a1.publish("onServerError",[_b4]);}else{this._ping();}})});}),this.pingTimeout);}});});},"url:epi-packaging/templates/RestartSite.htm":"<div style=\"display: none;\" class=\"restartContainer\">\r\n    <span>${res.restartrequiredmessage}</span>\r\n    <input type=\"button\" dojoAttachPoint=\"restartButton\" data-dojo-type=\"dijit/form/Button\" label=\"${res.restartbuttonlabel}\"/>\r\n</div>","url:epi-packaging/templates/SectionHeader.htm":"<div style=\"overflow: auto;\">\r\n    <div class=\"epi-listingTopContainer\" data-dojo-attach-point=\"selectTypeNode\">\r\n        <h1 data-dojo-attach-point=\"_titleNode\">\r\n            ${sectionTitle}</h1>\r\n        <div data-dojo-attach-point=\"_descriptionNode\">\r\n            ${description}</div>\r\n        <div data-dojo-attach-point=\"_restartPlaceholder\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_successMessageList\" data-dojo-type=\"epi-packaging/StatusMessageList\"\r\n            class=\"epi-packaging-validationSummary epi-packaging-Note\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_errorMessageList\" data-dojo-type=\"epi-packaging/StatusMessageList\"\r\n            class=\"epi-errorText epi-packaging-validationSummary epi-packaging-Error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-success\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","epi-packaging/ModulesList":function(){define("epi-packaging/ModulesList",["dojo","dijit","dojo/cookie","dijit/_Widget","dijit/_TemplatedMixin","dojox/widget/Standby","epi-packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModulesList"],function(_b5,_b6,_b7,_b8,_b9,_ba,_bb,res){return _b5.declare([_b8,_b9],{res:res,antiForgeryData:null,templateString:"<div class=\"epi-listingContainer\"><ul data-dojo-attach-point=\"_modulesListPlaceholder\" class=\"epi-advancedListing\"></ul></div>",listItemTemplateString:null,listingUrl:null,feedName:null,hideModuleInListOnAction:false,emptyListMessage:"No add-on found.",_dataStore:null,_listItems:null,_standbyWigdet:null,startup:function(){if(this._started){return;}this._standbyWigdet=this._createStandbyWidget();document.body.appendChild(this._standbyWigdet.domNode);this._standbyWigdet.startup();this.inherited(arguments);},_createStandbyWidget:function(){return new dojox.widget.Standby({target:this._modulesListPlaceholder});},destroy:function(){this._destroyModuleList();this._standbyWigdet.destroyRecursive(false);this.inherited(arguments);},updateView:function(){this._listModules(true);},onSiteRestartRequired:function(){},onError:function(_bc){},onSuccess:function(_bd){},onModuleActionPerformed:function(){},_listModules:function(_be){if(this.listingUrl==""){return;}if(!this._dataStore||_be){var _bf={feedName:this.feedName};this.antiForgeryData.AddAntiforgeryToken(_bf);this._standbyWigdet.show();_b5.xhrPost({content:_bf,url:this.listingUrl,handleAs:"json",load:_b5.hitch(this,function(_c0,_c1){if(!_c0){return;}else{if(_c0.errors&&_c0.errors.length>0){this._showErrors(_c0.errors);}this._dataStore=new _b5.store.Memory({data:_c0.modules});this._buildModuleList();}}),error:_b5.hitch(this,function(_c2,_c3){var _c4=_b5.replace(this.res.addonlistreaderror,{error:_c2});this._showErrors([_c4]);_b5.publish("onServerError",[_c3]);}),handle:_b5.hitch(this,function(_c5,_c6){this._standbyWigdet.hide();})});}else{this._buildModuleList();}},_buildModuleList:function(){var _c7=this._dataStore.query({},{sort:[{attribute:"title",descending:false},{attribute:"versionMajor",descending:true},{attribute:"versionMinor",descending:true},{attribute:"versionBuild",descending:true},{attribute:"versionRevision",descending:true},{attribute:"versionSpecial",descending:false}]});this._renderModules(_c7);},_createModuleSummary:function(_c8,_c9){var li=_b5.create("li",{"class":"clearfix"},_c9);var div=_b5.create("div",{},li);return new _bb(_c8,div);},_renderModules:function(_ca){_b5.empty(this._modulesListPlaceholder);this._destroyModuleList();if(_ca.length==0){this._showEmptyListMessage();return;}_b5.forEach(_ca,function(_cb,i){var _cc={module:_cb,antiForgeryData:this.antiForgeryData,itemIndex:i};if(this.listItemTemplateString){_cc.templateString=this.listItemTemplateString;}var _cd=this._createModuleSummary(_cc,this._modulesListPlaceholder);_cd.startup();this._connectModuleSummaryEvents(_cd);},this);},_connectModuleSummaryEvents:function(_ce){var _cf=this.connect(_ce,"onInstall",function(_d0){this._onModuleAction(_d0);var _d1=_b5.replace(this.res.installsuccess,_d0.module);this.onSuccess([_d1]);this._ensureReload();});var _d2=this.connect(_ce,"onUninstall",function(_d3){this._onModuleAction(_d3);var _d4=_b5.replace(this.res.uninstallsuccess,_d3.module);this.onSuccess([_d4]);this._ensureReload();});var _d5=this.connect(_ce,"onUpdate",function(_d6){this._onModuleAction(_d6);var _d7=_b5.replace(this.res.updatesuccess,_d6.module);this.onSuccess([_d7]);this._ensureReload(_d6);});var _d8=this.connect(_ce,"onEnable",function(_d9){this._onModuleAction(_d9);var _da=_b5.replace(this.res.enablesuccess,_d9.module);this.onSuccess([_da]);this._ensureReload(_d9);});var _db=this.connect(_ce,"onDisable",function(_dc){this._onModuleAction(_dc);var _dd=_b5.replace(this.res.disablesuccess,_dc.module);this.onSuccess([_dd]);this._ensureReload(_dc);});var _de=this.connect(_ce,"onInstallError",function(_df){this.onModuleActionPerformed();var _e0=this._getErrorMessages(this.res.installationerror,_df.module);this._showErrors(_e0);});var _e1=this.connect(_ce,"onUninstallError",function(_e2){this.onModuleActionPerformed();var _e3=this._getErrorMessages(this.res.uninstallationerror,_e2.module);this._showErrors(_e3);});var _e4=this.connect(_ce,"onUpdateError",function(_e5){this.onModuleActionPerformed();var _e6=this._getErrorMessages(this.res.updateerror,_e5.module);this._showErrors(_e6);});var _e7=this.connect(_ce,"onEnableError",function(_e8){this.onModuleActionPerformed();var _e9=this._getErrorMessages(this.res.enableerror,_e8.module);this._showErrors([_e9]);});var _ea=this.connect(_ce,"onDisableError",function(_eb){this.onModuleActionPerformed();var _ec=this._getErrorMessages(this.res.disableerror,_eb.module);this._showErrors([_ec]);});var _ed={widget:_ce,handlers:[_cf,_d2,_d5,_d8,_db,_de,_e1,_e4,_e7,_ea]};this._listItems.push(_ed);},_getErrorMessages:function(_ee,_ef){var _f0=[_b5.replace(_ee,_ef)];if(_ef.errors&&_ef.errors.length){_f0=_f0.concat(_ef.errors);}return _f0;},_ensureReload:function(){_b5.publish("onReloadRequired");},_onModuleAction:function(_f1){if(this.hideModuleInListOnAction){this._removeModuleFromList(_f1);}this.onSiteRestartRequired();this.updateView();this.onModuleActionPerformed();},_removeModuleFromList:function(_f2){var _f3=_b5.filter(this._listItems,function(_f4){return _f4.widget==_f2;});_b5.forEach(_f3,function(_f5,i){var _f6=_f5.widget.domNode.parentNode;this._destroyListItem(_f5);var _f7=_b5.indexOf(this._listItems,_f5);if(_f7>-1){this._listItems.splice(_f7,1);}_b5.destroy(_f6);},this);if(this._listItems.length==0){this._showEmptyListMessage();}},_destroyModuleList:function(){_b5.forEach(this._listItems,function(_f8,i){this._destroyListItem(_f8);},this);this._listItems=[];},_destroyListItem:function(_f9){_b5.forEach(_f9.handlers,function(_fa){this.disconnect(_fa);},this);_f9.widget.destroyRecursive(false);},_showErrors:function(_fb){this.onError(_fb);},_showEmptyListMessage:function(){var li=_b5.create("li",{},this._modulesListPlaceholder);var div=_b5.create("div",{innerHTML:"<span>"+this.emptyListMessage+"</span>"},li);_b5.addClass(div,"emptyListMessageContainer");}});});},"epi-packaging/ModuleSummary":function(){require({cache:{"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>"}});define("epi-packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/DetailedView","epi-packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_fc,_fd,_fe,_ff,_100,_101,_102,_103,_104,_105,_106,_107,_108,_109,_10a,_10b,res){return _fc.declare([_101,_102,_103],{res:res,templateString:_10b,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_106.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_106.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_106.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});this.enableUrl=_106.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"EnableModule"});this.disableUrl=_106.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"DisableModule"});},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_fd.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_fd.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_fd.stop(e);});this.connect(this.DisableButton.domNode,"click",function(e){_fd.stop(e);});this.connect(this.EnableButton.domNode,"click",function(e){_fd.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},onInstall:function(_10c){},onInstallError:function(_10d){},onUpdate:function(_10e){},onUpdateError:function(_10f){},onUninstall:function(_110){},onUninstallError:function(_111){},onEnable:function(_112){},onEnableError:function(_113){},onDisable:function(_114){},onDisableError:function(_115){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _116=_105.toUserFriendlyHtml(this.module.installDate);var _117="Installed on "+_116+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_117;}else{_fc.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_118){if(_118){this.moduleIcon.innerHTML=_ff.substitute(this.iconTemplate,[_118]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){_fc.style(this.InstallButton.domNode,"display","none");_fc.style(this.UninstallButton.domNode,"display","none");_fc.style(this.UpdateButton.domNode,"display","none");_fc.style(this.updateIndicatorContainer,"display","none");_fc.style(this.EnableButton.domNode,"display","none");_fc.style(this.DisableButton.domNode,"display","none");_fc.style(this.disabledIndicatorContainer,"display","none");_fc.removeClass(this.moduleItemContainer,"disabledItem");if(this.module.isInstalled){_fc.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}if(this.module.actionsAvailable.install&&!this.module.actionsAvailable.installAsUpdate){_fc.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.enable){_fc.style(this.EnableButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.installAsUpdate){_fc.style(this.UpdateButton.domNode,"display","inline-block");}if(this.module.isDisabled){_fc.style(this.disabledIndicatorContainer,"display","inline-block");_fc.addClass(this.moduleItemContainer,"disabledItem");}},_createTags:function(){_fc.forEach(this.module.tags,function(tag,i){var _119=_fc.create("span");_fe.add(_119,"epi-valueItem");this.tagList.appendChild(_119);_119.innerHTML=tag;},this);},_createDependencies:function(){_fc.forEach(this.module.dependencies,function(_11a,i){var _11b=_fc.create("span");_fe.add(_11b,"epi-valueItem");this.dependenciesList.appendChild(_11b);_11b.innerHTML=_11a.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,_fc.hitch(this,function(_11c){if(_11c){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,_fc.hitch(this,function(_11d){if(_11d){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,_fc.hitch(this,function(_11e){if(_11e){this._updateModule();}}));},_moreInfoClick:function(e){_fd.stop(e);var _11f=this;var _120=new _108({content:new _109({currentPackage:this.module,installHandler:_fc.hitch(_120,function(){_11f._showConfirmationDialog(_11f.res.installconfirmation,_fc.hitch(_120,function(_121){if(_121){this.hide();_11f._installModule();}}));}),updateHandler:_fc.hitch(_120,function(){_11f._showConfirmationDialog(_11f.res.updateconfirmation,_fc.hitch(_120,function(_122){if(_122){this.hide();_11f._updateModule();}}));}),unInstallHandler:_fc.hitch(_120,function(){_11f._showConfirmationDialog(_11f.res.uninstallconfirmation,_fc.hitch(_120,function(_123){if(_123){this.hide();_11f._uninstallModule();}}));}),enableHandler:_fc.hitch(_120,function(){_11f._showConfirmationDialog(_11f.res.enableconfirmation,_fc.hitch(_120,function(_124){if(_124){this.hide();_11f._enableModule();}}));}),disableHandler:_fc.hitch(_120,function(){_11f._showConfirmationDialog(_11f.res.disableconfirmation,_fc.hitch(_120,function(_125){if(_125){this.hide();_11f._disableModule();}}));}),closeHandler:_fc.hitch(_120,function(){_120.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_120.show();},_enableClick:function(e){this._showConfirmationDialog(this.res.enableconfirmation,_fc.hitch(this,function(_126){if(_126){this._enableModule();}}));},_disableClick:function(e){this._showConfirmationDialog(this.res.disableconfirmation,_fc.hitch(this,function(_127){if(_127){this._disableModule();}}));},_installModule:function(){this._showStandby();var _128={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_128);_fc.xhrPost({content:_128,url:this.installUrl,handleAs:"json",load:_fc.hitch(this,function(_129){this.module=_129;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:_fc.hitch(this,function(err,_12a){this._moduleStandby.hide();_fc.publish("onServerError",[_12a]);})});},_updateModule:function(){this._showStandby();var _12b={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_12b);_fc.xhrPost({content:_12b,url:this.updateUrl,handleAs:"json",load:_fc.hitch(this,function(_12c){this.module=_12c;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:_fc.hitch(this,function(err,_12d){this._moduleStandby.hide();_fc.publish("onServerError",[_12d]);})});},_uninstallModule:function(){this._showStandby();var _12e={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_12e);_fc.xhrPost({content:_12e,url:this.uninstallUrl,handleAs:"json",load:_fc.hitch(this,function(_12f){this.module=_12f;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:_fc.hitch(this,function(err,_130){this._moduleStandby.hide();_fc.publish("onServerError",[_130]);})});},_enableModule:function(){this._showStandby();var _131={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_131);_fc.xhrPost({content:_131,url:this.enableUrl,handleAs:"json",load:_fc.hitch(this,function(_132){this.module=_132;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onEnableError(this);}else{this.onEnable(this);}}),error:_fc.hitch(this,function(err,_133){this._moduleStandby.hide();_fc.publish("onServerError",[_133]);})});},_disableModule:function(){this._showStandby();var _134={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_134);_fc.xhrPost({content:_134,url:this.disableUrl,handleAs:"json",load:_fc.hitch(this,function(_135){this.module=_135;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onDisableError(this);}else{this.onDisable(this);}}),error:_fc.hitch(this,function(err,_136){this._moduleStandby.hide();_fc.publish("onServerError",[_136]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _104({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_137,_138){var _139=new _107({description:_fc.replace(_137,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_138});_139.show();}});});},"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>","url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>","epi-packaging/InstalledSection":function(){require({cache:{"url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi-packaging/InstalledSection",["dojo/_base/declare","dojo/dom-geometry","dojo/text!./templates/Section.htm","dijit/_TemplatedMixin","dijit/layout/_LayoutWidget","epi/routes","epi-packaging/SectionHeader","epi-packaging/PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.InstalledSection"],function(_13a,_13b,_13c,_13d,_13e,_13f,_140,_141,_142){return _13a([_13e,_13d],{templateString:_13c,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}var _143=new _140({webHelpAlias:"installedaddons",antiForgeryData:this.antiForgeryData,sectionTitle:_142.title},this._headerPlaceholder);var list=new _141({antiForgeryData:this.antiForgeryData,listingUrl:_13f.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstalledModules"})},this._contentPlaceholder);_143.startup();list.startup();this.connect(list,"onSiteRestartRequired",function(){_143.updateView();});this.connect(list,"onError",function(_144){_143.addErrorMessages(_144);});this.connect(list,"onSuccess",function(_145){_143.addSuccessMessages(_145);});this.connect(list,"onModuleActionPerformed",function(){_143.clearErrorMessages();_143.clearSuccessMessages();});this.inherited(arguments);this._headerWidget=_143;this._listWidget=list;},layout:function(){var _146=this.getChildren();if(_146&&_146.length==2){this._layout2Children(_146[0],_146[1]);}},_layout2Children:function(_147,_148){var _149=_13b.position(this.domNode).h,_14a=_13b.position(_147.domNode).h,_14b=_149-_14a;_148.resize({h:_14b});},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"epi-packaging/PackagesGrid":function(){define("epi-packaging/PackagesGrid",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dojo/on","dojox/widget/Standby","dijit/layout/_LayoutWidget","dgrid/Keyboard","dgrid/OnDemandGrid","dgrid/Selection","epi","epi/datetime","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/ModulesList","epi-packaging/DetailedView","epi-packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_14c,_14d,_14e,lang,_14f,_150,on,_151,_152,_153,_154,_155,epi,_156,_157,_158,_159,_15a,_15b,_15c,_15d){return _14d([_152,_159],{templateString:"<div style=\"height: auto\"></div>",_createStandbyWidget:function(){return new _151({target:this.domNode});},buildRendering:function(){this.inherited(arguments);var _15e={titleWithVersion:{className:"epi-packaging-name",label:epi.resources.header.name,renderCell:lang.hitch(this,function(item,_15f,node){if(_15f){var link=_14f.create("a",{"class":"epi-packaging-namelink",href:"#details",innerHTML:_15f});on(link,"click",lang.hitch(this,function(evt){_14e.stop(evt);this._openDetails(item);}));_14f.place(link,node);}})},description:{className:"epi-packaging-description",label:epi.resources.header.description},tags:{className:"epi-packaging-tags",label:_15c.tags,renderCell:function(item,_160,node){_14c.forEach(_160,function(tag){_14f.create("span",{"class":"epi-valueItem",innerHTML:tag},node);});}},installDate:{className:"epi-packaging-installedDate",label:_15c.installdate,formatter:function(_161){return _156.toUserFriendlyString(_161);}},installedBy:{className:"epi-packaging-installedBy",label:_15c.installby},_item:{className:"epi-packaging-indicators",label:" ",sortable:false,renderCell:function(item,_162,node){if(item.isDisabled){_14f.create("span",{"class":"epi-packaging-indicator epi-packaging-indicator--disabled",innerHTML:_15c.disabledlabel},node);}if(item.isSystem){_14f.create("span",{"class":"epi-packaging-indicator epi-packaging-indicator--core",innerHTML:_15c.systemlabel},node);}if(item.isUpdateAvailable){_14f.create("a",{"class":"epi-visibleLink",href:"#updates",innerHTML:_15c.updatelink},node);}}}};this.grid=new (_14d([_154,_155,_153]))({columns:_15e,selectionMode:"single",sort:[{attribute:"titleWithVersion",descending:false}],store:this._dataStore},this.domNode);_150.set(this.grid.bodyNode,"position","relative");},_buildModuleList:function(){this._renderModules(this._dataStore);},_renderModules:function(_163){this._destroyModuleList();this.grid.cleanup();this._listItems=[];_14c.forEach(_163.data,function(item){var _164={module:item,antiForgeryData:this.antiForgeryData,_moduleStandby:this._standbyWigdet,_setButtonVisibility:function(){}};item.moduleSummary=new _15b(_164,null);this._connectModuleSummaryEvents(item.moduleSummary);},this);this.grid.set("store",_163);},_openDetails:function(_165){var _166=this;var _167=new _158({content:new _15a({currentPackage:_165,installHandler:lang.hitch(_167,function(){_166._showConfirmationDialog(_165,_15d.installconfirmation,lang.hitch(_167,function(_168){if(_168){this.hide();_165.moduleSummary._installModule();}}));}),updateHandler:lang.hitch(_167,function(){_166._showConfirmationDialog(_165,_15d.updateconfirmation,lang.hitch(_167,function(_169){if(_169){this.hide();_165.moduleSummary._updateModule();}}));}),unInstallHandler:lang.hitch(_167,function(){_166._showConfirmationDialog(_165,_15d.uninstallconfirmation,lang.hitch(_167,function(_16a){if(_16a){this.hide();_165.moduleSummary._uninstallModule();}}));}),disableHandler:lang.hitch(_167,function(){_166._showConfirmationDialog(_165,_15d.disableconfirmation,lang.hitch(_167,function(_16b){if(_16b){this.hide();_165.moduleSummary._disableModule();}}));}),enableHandler:lang.hitch(_167,function(){_166._showConfirmationDialog(_165,_15d.enableconfirmation,lang.hitch(_167,function(_16c){if(_16c){this.hide();_165.moduleSummary._enableModule();}}));}),closeHandler:lang.hitch(_167,function(){_167.hide();})}),title:_165.title,destroyOnHide:true,defaultActionsVisible:false});_167.show();},_showConfirmationDialog:function(_16d,_16e,_16f){var _170=new _157({description:lang.replace(_16e,{name:_16d.title,version:_16d.version}),title:_15d.confirmationdialogtitle,onAction:_16f});_170.show();}});});},"epi-packaging/LinkButton":function(){define("epi-packaging/LinkButton",["epi","dojo","dijit","dijit/_Widget"],function(epi,dojo,_171,_172){return dojo.declare([_172],{label:"",href:"",buildRendering:function(){this.domNode=dojo.create("a",{href:this.href,"class":this["class"],innerHTML:this.label});},postCreate:function(){this.connect(this.domNode,"onclick",this._onClick);},onClick:function(e){return true;},_onClick:function(e){this.onClick(e);}});});},"epi-packaging/NavigationMenu":function(){require({cache:{"url:epi-packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit/DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>"}});define("epi-packaging/NavigationMenu",["dojo","dojo/hash","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/DropDownMenu","dijit/MenuItem","epi/routes","dojo/text!./templates/NavigationMenu.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Navigation","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(dojo,hash,_173,_174,_175,_176,_177,_178,_179,res,_17a){return dojo.declare([_173,_174,_175],{templateString:_179,antiForgeryData:"",res:res,resFeeds:_17a,_viewDictionary:{"installed":"epi-packaging/InstalledSection","updates":"epi-packaging/UpdateableSection"},startup:function(){this.inherited(arguments);var _17b={};this.antiForgeryData.AddAntiforgeryToken(_17b);dojo.xhrPost({content:_17b,url:_178.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetFeedNames"}),handleAs:"json",load:dojo.hitch(this,function(_17c,_17d){for(var i=0;i<_17c.feeds.length;i++){var _17e=this.resFeeds[_17c.feeds[i].toLowerCase()];this.verticalMenu.addChild(new _177({id:_17c.feeds[i],label:_17e?_17e.title:_17c.feeds[i]}),1+i);this._viewDictionary[_17c.feeds[i]]="epi-packaging/GallerySection";}var _17f=dijit.byId("installed");if(dojo.hash()!=""){var page=dijit.byId(dojo.hash());if(page){_17f=page;}}this.verticalMenu.onItemClick(_17f);})});dojo.connect(this.verticalMenu,"onItemClick",this,function(item){this._requestChangeView(item.id);});this.subscribe("/epi/shell/action/viewchanged",dojo.hitch(this,function(type,args,data){if(data){for(var id in this._viewDictionary){if(id==data.feedName){this._selectItemById(id);return;}}}this._selectItemById(null);}));dojo.subscribe("/dojo/hashchange",this,function(_180){if(_180!=""){var item=dijit.byId(_180);if(item&&!item.selected){this.verticalMenu.onItemClick(item);}}});},_requestChangeView:function(id){var _181=id?this._viewDictionary[id]:null;if(_181){dojo.publish("/epi/shell/action/changeview",[_181,null,{"feedName":id}]);}},_selectItemById:function(id){dojo.forEach(this.verticalMenu.getChildren(),function(_182){_182.set("selected",false);});if(id){var item=dijit.byId(id);if(item){item.set("selected",true);dojo.hash(item.id);}}}});});},"url:epi-packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit/DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>","epi-packaging/PackageUpload":function(){require({cache:{"url:epi-packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n"}});define("epi-packaging/PackageUpload",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/routes","epi-packaging/UploadResults","epi-packaging/SelectedFiles","epi-packaging/RestartSite","dojox/widget/Standby","epi/shell/widget/HelpButton","dojox/form/Uploader","dojox/form/uploader/plugins/IFrame","dojo/text!./templates/PackageUpload.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(dojo,_183,_184,_185,_186,_187,_188,_189,_18a,_18b,_18c,_18d,_18e,_18f,_190,_191,res){return dojo.declare([_184,_185,_186],{res:res,successMessageClass:"successInstall",failureMessageClass:"failureInstall",templateString:_191,antiForgeryData:null,_uploadUrl:null,_uploader:null,_uploadResultsNode:null,_installButton:null,_clearButton:null,_fileListNode:null,_fileList:null,_uploadResults:null,_standByWidget:null,_uploaderResetRequired:false,postMixInProperties:function(){this._uploadUrl=_189.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Upload"});this.inherited(arguments);},startup:function(){if(this._started){return;}this._uploader=new dojox.form.Uploader({label:this.res.buttonselectpackage,multiple:true},this._uploaderInput);dojo.style(this._uploader.domNode,{width:"200px"});this._uploader.inputNodeFontSize=4;this._uploader.btnSize={w:200,h:25};this._uploaderResetRequired=true;this._uploader.startup();this._uploadType.value=this._uploader.uploadType;if(this.antiForgeryData){dojo.place(this.antiForgeryData.GetTokenNode(),this._clearButton.domNode,"after");}this._fileList=new _18b({uploader:this._uploader},this._fileListNode);this._fileList.startup();this._standByWidget=new _18d({target:this._fileList.listTable});document.body.appendChild(this._standByWidget.domNode);this._standByWidget.startup();dojo.connect(this._uploader,"onError",this,this._onUploaderError);dojo.connect(this._uploader,"onComplete",this,this._onUploadComplete);dojo.connect(this._uploader,"onChange",this,this._onUploadChange);dojo.connect(this._clearButton,"onClick",this,this._onClear);dojo.connect(this._installButton,"onClick",this,this._onInstall);this._disableButtons(true);this.inherited(arguments);},updateView:function(){if(this._uploaderResetRequired){this._onClear();this._uploaderResetRequired=false;}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},onSiteRestartRequired:function(){},onError:function(_192){},onSuccess:function(_193){},onModuleActionPerformed:function(){},_onClear:function(){this._uploader.reset();this._disableButtons(true);this.onModuleActionPerformed();},_onInstall:function(){this._standByWidget.show();this.onModuleActionPerformed();},_onUploaderError:function(evt){this._standByWidget.hide();this.onError([this.res.uploaderrormessage]);var _194=evt.headers;if(_194&&_194.indexOf("X-EPiLogOnScreen")!=-1){window.location.reload();}},_onUploadComplete:function(data){this._standByWidget.hide();this._disableButtons(true);this._showUploadResults(data);this.onSiteRestartRequired();},_onUploadChange:function(_195){this._standByWidget.hide();if(_195.length>0){this._disableButtons(false);}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},_disableButtons:function(_196){this._clearButton.set("disabled",_196);this._installButton.set("disabled",_196);},_showUploadResults:function(_197){if(this._uploadResults){this._uploadResults.destroyRecursive(false);}if(_197.uploadedFiles&&_197.uploadedFiles.length>0){var _198=dojo.map(_197.uploadedFiles,function(file,i){file.index=i+1;file.sizeStr=this._uploader.convertBytes(file.packageFileLength).value;return file;},this);var _199=_197.installationFailCount==0;if(!_199){var _19a=dojo.replace(this.res.failuremessage,{count:_197.installationFailCount});this.onError([_19a]);}else{var _19b=dojo.replace(this.res.successmessage,{count:_197.installationSuccessCount});this.onSuccess([_19b]);}this._uploadResults=new _18a({files:_198});this._uploadResultsNode.appendChild(this._uploadResults.domNode);this._uploadResults.startup();dojo.forEach(_197.uploadedFiles,function(file,i){if(file.packageInfo&&file.packageInfo.id=="EPiServer.Packaging"){dojo.publish("onReloadRequired");}});}}});});},"epi-packaging/UploadResults":function(){define(["dojo","dijit","dijit/_Widget","dojox/dtl/_Templated","dojo/text!./templates/UploadResults.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UploadResults","dojox/dtl/tag/logic"],function(dojo,_19c,_19d,_19e,_19f,res){return dojo.declare([_19d,_19e],{res:res,files:[],templateString:_19f,_dijitTemplateCompat:true});});},"dojox/dtl/_Templated":function(){define("dojox/dtl/_Templated",["dojo/_base/declare","./_base","dijit/_TemplatedMixin","dojo/dom-construct","dojo/cache","dojo/_base/array","dojo/string","dojo/parser"],function(_1a0,dd,_1a1,_1a2,_1a3,_1a4,_1a5,_1a6){return _1a0("dojox.dtl._Templated",_1a1,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dd.Template){this._template=t;}else{node=t.cloneNode(true);}}if(!node){var _1a7=new dd._Context(this);if(!this._created){delete _1a7._getter;}var _1a8=_1a2.toDom(this._template.render(_1a7));if(_1a8.nodeType!==1&&_1a8.nodeType!==3){for(var i=0,l=_1a8.childNodes.length;i<l;++i){node=_1a8.childNodes[i];if(node.nodeType==1){break;}}}else{node=_1a8;}}this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});if(this.widgetsInTemplate){var _1a9=_1a6,qry,attr;if(_1a9._query!="[dojoType]"){qry=_1a9._query;attr=_1a9._attrName;_1a9._query="[dojoType]";_1a9._attrName="dojoType";}var cw=(this._startupWidgets=_1a6.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_1a9._query=qry;_1a9._attrName=attr;}this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){_1a2.place(node,this.domNode,"before");this.destroyDescendants();_1a2.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_1aa,_1ab,_1ac){var _1ad=this._templateCache;var key=_1ab||_1aa;if(_1ad[key]){return _1ad[key];}_1ab=_1a5.trim(_1ab||_1a3(_1aa,{sanitize:true}));if(this._dijitTemplateCompat&&(_1ac||_1ab.match(/\$\{([^\}]+)\}/g))){_1ab=this._stringRepl(_1ab);}if(_1ac||!_1ab.match(/\{[{%]([^\}]+)[%}]\}/g)){return _1ad[key]=_1a2.toDom(_1ab);}else{return _1ad[key]=new dd.Template(_1ab);}},render:function(){this.buildRendering();},startup:function(){_1a4.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dojox/dtl/_base":function(){define("dojox/dtl/_base",["dojo/_base/kernel","dojo/_base/lang","dojox/string/tokenize","dojo/_base/json","dojo/dom","dojo/_base/xhr","dojox/string/Builder","dojo/_base/Deferred"],function(_1ae,lang,_1af,json,dom,xhr,_1b0,_1b1){_1ae.experimental("dojox.dtl");var dd=lang.getObject("dojox.dtl",true);dd._base={};dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=lang.extend(function(dict){if(dict){lang._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _1b2=lang.delegate(this);_1b2.pop=function(){return last;};return _1b2;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_1b3){var n=this._normalize;if(this._getter){var got=this._getter(key);if(got!==undefined){return n(got);}}if(this[key]!==undefined){return n(this[key]);}return _1b3;},_normalize:function(_1b4){if(_1b4 instanceof Date){_1b4.year=_1b4.getFullYear();_1b4.month=_1b4.getMonth()+1;_1b4.day=_1b4.getDate();_1b4.date=_1b4.year+"-"+("0"+_1b4.month).slice(-2)+"-"+("0"+_1b4.day).slice(-2);_1b4.hour=_1b4.getHours();_1b4.minute=_1b4.getMinutes();_1b4.second=_1b4.getSeconds();_1b4.microsecond=_1b4.getMilliseconds();}return _1b4;},update:function(dict){var _1b5=this.push();if(dict){lang._mixin(this,dict);}return _1b5;}});var _1b6=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _1b7=/\s+/g;var _1b8=function(_1b9,_1ba){_1b9=_1b9||_1b7;if(!(_1b9 instanceof RegExp)){_1b9=new RegExp(_1b9,"g");}if(!_1b9.global){throw new Error("You must use a globally flagged RegExp with split "+_1b9);}_1b9.exec("");var part,_1bb=[],_1bc=0,i=0;while((part=_1b9.exec(this))){_1bb.push(this.slice(_1bc,_1b9.lastIndex-part[0].length));_1bc=_1b9.lastIndex;if(_1ba&&(++i>_1ba-1)){break;}}_1bb.push(this.slice(_1bc));return _1bb;};dd.Token=function(_1bd,_1be){this.token_type=_1bd;this.contents=new String(lang.trim(_1be));this.contents.split=_1b8;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_1bf){var bit,bits=[],i=0;_1bf=_1bf||999;while(i++<_1bf&&(bit=_1b6.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_1c0,name,_1c1){var _1c2=dd.register.get(_1c0,name.toLowerCase(),_1c1);if(!_1c2){if(!_1c1){throw new Error("No tag found for "+name);}return null;}var fn=_1c2[1];var deps=_1c2[2];var _1c3;if(fn.indexOf(":")!=-1){_1c3=fn.split(":");fn=_1c3.pop();}var mod=deps;if(/\./.test(deps)){deps=deps.replace(/\./g,"/");}require([deps],function(){});var _1c4=lang.getObject(mod);return _1c4[fn||name]||_1c4[name+"_"]||_1c4[fn+"_"];},getTag:function(name,_1c5){return ddt._get("tag",name,_1c5);},getFilter:function(name,_1c6){return ddt._get("filter",name,_1c6);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return xhr._getText(file.toString())||"";},_resolveLazy:function(_1c7,sync,json){if(sync){if(json){return json.fromJson(xhr._getText(_1c7))||{};}else{return dd.text.getTemplateString(_1c7);}}else{return xhr.get({handleAs:json?"json":"text",url:_1c7});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new _1b1();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (arg===undefined)||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new _1b1;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return _1af(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _1c8=lang.trim(tag).split(/\s+/g);for(var i=0,part;part=_1c8[i];i++){if(/\./.test(part)){part=part.replace(/\./g,"/");}require([part]);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=lang.extend(function(_1c9,_1ca){var str=_1ca?_1c9:ddt._resolveTemplateArg(_1c9,true)||"";var _1cb=ddt.tokenize(str);var _1cc=new dd._Parser(_1cb);this.nodelist=_1cc.parse();},{update:function(node,_1cd){return ddt._resolveContextArg(_1cd).addCallback(this,function(_1ce){var _1cf=this.render(new dd._Context(_1ce));if(node.forEach){node.forEach(function(item){item.innerHTML=_1cf;});}else{dom.byId(node).innerHTML=_1cf;}return this;});},render:function(_1d0,_1d1){_1d1=_1d1||this.getBuffer();_1d0=_1d0||new dd._Context({});return this.nodelist.render(_1d0,_1d1)+"";},getBuffer:function(){return new _1b0();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(_1af(str,qfRe,function(_1d2){return new dd._Filter(_1d2);}));}};dd._QuickNodeList=lang.extend(function(_1d3){this.contents=_1d3;},{render:function(_1d4,_1d5){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_1d5=_1d5.concat(this.contents[i].resolve(_1d4));}else{_1d5=_1d5.concat(this.contents[i]);}}return _1d5;},dummyRender:function(_1d6){return this.render(_1d6,dd.Template.prototype.getBuffer()).toString();},clone:function(_1d7){return this;}});dd._Filter=lang.extend(function(_1d8){if(!_1d8){throw new Error("Filter must be called with variable name");}this.contents=_1d8;var _1d9=this._cache[_1d8];if(_1d9){this.key=_1d9[0];this.filters=_1d9[1];}else{this.filters=[];_1af(_1d8,this._re,this._tokenize,this);this._cache[_1d8]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(arguments[i]!==undefined&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _1da=arguments[pos];if(this._args[pos]=="'"){_1da=_1da.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_1da=_1da.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_1da];break;}}var fn=ddt.getFilter(arguments[3]);if(!lang.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_1db){if(this.key===undefined){return "";}var str=this.resolvePath(this.key,_1db);for(var i=0,_1dc;_1dc=this.filters[i];i++){if(_1dc[1]){if(_1dc[1][0]){str=_1dc[0](str,this.resolvePath(_1dc[1][1],_1db));}else{str=_1dc[0](str,_1dc[1][1]);}}else{str=_1dc[0](str);}}return str;},resolvePath:function(path,_1dd){var _1de,_1df;var _1e0=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_1e0))){_1de=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_1e0=="\""&&_1e0==last){_1de=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_1df=path.split(".");_1de=_1dd.get(_1df[0]);if(lang.isFunction(_1de)){var self=_1dd.getThis&&_1dd.getThis();if(_1de.alters_data){_1de="";}else{if(self){_1de=_1de.call(self);}else{_1de="";}}}for(var i=1;i<_1df.length;i++){var part=_1df[i];if(_1de){var base=_1de;if(lang.isObject(_1de)&&part=="items"&&_1de[part]===undefined){var _1e1=[];for(var key in _1de){_1e1.push([key,_1de[key]]);}_1de=_1e1;continue;}if(_1de.get&&lang.isFunction(_1de.get)&&_1de.get.safe){_1de=_1de.get(part);}else{if(_1de[part]===undefined){_1de=_1de[part];break;}else{_1de=_1de[part];}}if(lang.isFunction(_1de)){if(_1de.alters_data){_1de="";}else{_1de=_1de.call(base);}}else{if(_1de instanceof Date){_1de=dd._Context.prototype._normalize(_1de);}}}else{return "";}}}}return _1de;}});dd._TextNode=dd._Node=lang.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_1e2,_1e3){return _1e3.concat(this.contents);},isEmpty:function(){return !lang.trim(this.contents);},clone:function(){return this;}});dd._NodeList=lang.extend(function(_1e4){this.contents=_1e4||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_1e5){this.contents=this.contents.concat(_1e5);return this;},render:function(_1e6,_1e7){for(var i=0;i<this.contents.length;i++){_1e7=this.contents[i].render(_1e6,_1e7);if(!_1e7){throw new Error("Template must return buffer");}}return _1e7;},dummyRender:function(_1e8){return this.render(_1e8,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=lang.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_1e9,_1ea){var str=this.contents.resolve(_1e9);if(!str.safe){str=dd._base.escape(""+str);}return _1ea.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=lang.extend(function(_1eb){this.contents=_1eb;},{i:0,parse:function(_1ec){var _1ed={},_1ee;_1ec=_1ec||[];for(var i=0;i<_1ec.length;i++){_1ed[_1ec[i]]=true;}var _1ef=new dd._NodeList();while(this.i<this.contents.length){_1ee=this.contents[this.i++];if(typeof _1ee=="string"){_1ef.push(new dd._TextNode(_1ee));}else{var type=_1ee[0];var text=_1ee[1];if(type==dd.TOKEN_VAR){_1ef.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_1ed[text]){--this.i;return _1ef;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_1ef.push(fn(this,new dd.Token(type,text)));}}}}}}if(_1ec.length){throw new Error("Could not find closing tag(s): "+_1ec.toString());}this.contents.length=0;return _1ef;},next_token:function(){var _1f0=this.contents[this.i++];return new dd.Token(_1f0[0],_1f0[1]);},delete_first_token:function(){this.i++;},skip_past:function(_1f1){while(this.i<this.contents.length){var _1f2=this.contents[this.i++];if(_1f2[0]==dd.TOKEN_BLOCK&&_1f2[1]==_1f1){return;}}throw new Error("Unclosed tag found when looking for "+_1f1);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_1f3,name){var _1f4=dd.register._registry[_1f3+"s"];for(var i=0,_1f5;_1f5=_1f4[i];i++){if(typeof _1f5[0]=="string"){if(_1f5[0]==name){return _1f5;}}else{if(name.match(_1f5[0])){return _1f5;}}}},getAttributeTags:function(){var tags=[];var _1f6=dd.register._registry.attributes;for(var i=0,_1f7;_1f7=_1f6[i];i++){if(_1f7.length==3){tags.push(_1f7);}else{var fn=lang.getObject(_1f7[1]);if(fn&&lang.isFunction(fn)){_1f7.push(fn);tags.push(_1f7);}}}return tags;},_any:function(type,base,_1f8){for(var path in _1f8){for(var i=0,fn;fn=_1f8[path][i];i++){var key=fn;if(lang.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_1f9){dd.register._any("tags",base,_1f9);},filters:function(base,_1fa){dd.register._any("filters",base,_1fa);}};var _1fb=/&/g;var _1fc=/</g;var _1fd=/>/g;var _1fe=/'/g;var _1ff=/"/g;dd._base.escape=function(_200){return dd.mark_safe(_200.replace(_1fb,"&amp;").replace(_1fc,"&lt;").replace(_1fd,"&gt;").replace(_1ff,"&quot;").replace(_1fe,"&#39;"));};dd._base.safe=function(_201){if(typeof _201=="string"){_201=new String(_201);}if(typeof _201=="object"){_201.safe=true;}return _201;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});return dd;});},"dojox/string/tokenize":function(){define("dojox/string/tokenize",["dojo/_base/lang","dojo/_base/sniff"],function(lang,has){var _202=lang.getObject("dojox.string",true).tokenize;_202=function(str,re,_203,_204){var _205=[];var _206,_207,_208=0;while(_206=re.exec(str)){_207=str.slice(_208,re.lastIndex-_206[0].length);if(_207.length){_205.push(_207);}if(_203){if(has("opera")){var copy=_206.slice(0);while(copy.length<_206.length){copy.push(null);}_206=copy;}var _209=_203.apply(_204,_206.slice(1).concat(_205.length));if(typeof _209!="undefined"){_205.push(_209);}}_208=re.lastIndex;}_207=str.slice(_208);if(_207.length){_205.push(_207);}return _205;};return _202;});},"dojox/string/Builder":function(){define("dojox/string/Builder",["dojo/_base/lang"],function(lang){lang.getObject("string",true,dojox).Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_20a){return this.append.apply(this,_20a);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_20b,_20c){b=b.replace(_20b,_20c);this.length=b.length;return this;};this.remove=function(_20d,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_20d)+b.substr(_20d+len);this.length=b.length;return this;};this.insert=function(_20e,str){if(_20e==0){b=str+b;}else{b=b.slice(0,_20e)+str+b.slice(_20e);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};return dojox.string.Builder;});},"url:epi-packaging/templates/UploadResults.htm":"<div>\r\n    <div class=\"epi-paddingVertical-small\">\r\n        <table class=\"epi-default\" dojoAttachPoint=\"installedTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        ${res.headerindex}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerfile}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersize}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerid}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headertitle}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersummary}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerdescription}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerstatus}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            {% for uploadedFile in files %}\r\n            <tr>\r\n                <td>\r\n                    {{ uploadedFile.index }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageFileName|safe }}\r\n                </td>\r\n                <td class=\"sizeColumn\">\r\n                    {{ uploadedFile.sizeStr }}\r\n                </td>\r\n\r\n                {% if uploadedFile.packageInfo.isInstalled %}\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.id|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.title|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.summary|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.description|safe }}\r\n                </td>\r\n                <td>\r\n                    <span class=\"dijitInline dijitIcon epi-iconCheckmark\"></span>\r\n                </td>\r\n                {% else %}\r\n                <td colspan=\"4\">\r\n                    <div class=\"epi-errorText\">\r\n                        <ul>\r\n                            {% for error in uploadedFile.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n\r\n                        <ul>\r\n                            {% for error in uploadedFile.packageInfo.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n                    </div>\r\n                </td>\r\n                <td class=\"failureIcon\">\r\n                </td>\r\n                {% endif %}\r\n            </tr>\r\n            {% endfor %}\r\n        </table>\r\n    </div>\r\n</div>","dojox/dtl/tag/logic":function(){define("dojox/dtl/tag/logic",["dojo/_base/lang","../_base"],function(lang,dd){lang.getObject("dojox.dtl.tag.logic",true);var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=lang.extend(function(_20f,_210,_211,type){this.bools=_20f;this.trues=_210;this.falses=_211;this.type=type;},{render:function(_212,_213){var i,bool,_214,_215,_216;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_214=bool[0];_215=bool[1];_216=_215.resolve(_212);if((_216&&!_214)||(_214&&!_216)){if(this.falses){_213=this.falses.unrender(_212,_213);}return (this.trues)?this.trues.render(_212,_213,this):_213;}}if(this.trues){_213=this.trues.unrender(_212,_213);}return (this.falses)?this.falses.render(_212,_213,this):_213;}else{for(i=0;bool=this.bools[i];i++){_214=bool[0];_215=bool[1];_216=_215.resolve(_212);if(_216==_214){if(this.trues){_213=this.trues.unrender(_212,_213);}return (this.falses)?this.falses.render(_212,_213,this):_213;}}if(this.falses){_213=this.falses.unrender(_212,_213);}return (this.trues)?this.trues.render(_212,_213,this):_213;}return _213;},unrender:function(_217,_218){_218=(this.trues)?this.trues.unrender(_217,_218):_218;_218=(this.falses)?this.falses.unrender(_217,_218):_218;return _218;},clone:function(_219){var _21a=(this.trues)?this.trues.clone(_219):null;var _21b=(this.falses)?this.falses.clone(_219):null;return new this.constructor(this.bools,_21a,_21b,this.type);}});ddtl.IfEqualNode=lang.extend(function(var1,var2,_21c,_21d,_21e){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_21c;this.falses=_21d;this.negate=_21e;},{render:function(_21f,_220){var var1=this.var1.resolve(_21f);var var2=this.var2.resolve(_21f);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_220=this.falses.unrender(_21f,_220,this);}return (this.trues)?this.trues.render(_21f,_220,this):_220;}if(this.trues){_220=this.trues.unrender(_21f,_220,this);}return (this.falses)?this.falses.render(_21f,_220,this):_220;},unrender:function(_221,_222){return ddtl.IfNode.prototype.unrender.call(this,_221,_222);},clone:function(_223){var _224=this.trues?this.trues.clone(_223):null;var _225=this.falses?this.falses.clone(_223):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_224,_225,this.negate);}});ddtl.ForNode=lang.extend(function(_226,loop,_227,_228){this.assign=_226;this.loop=new dd._Filter(loop);this.reversed=_227;this.nodelist=_228;this.pool=[];},{render:function(_229,_22a){var i,j,k;var _22b=false;var _22c=this.assign;for(k=0;k<_22c.length;k++){if(typeof _229[_22c[k]]!="undefined"){_22b=true;_229=_229.push();break;}}if(!_22b&&_229.forloop){_22b=true;_229=_229.push();}var _22d=this.loop.resolve(_229)||[];for(i=_22d.length;i<this.pool.length;i++){this.pool[i].unrender(_229,_22a,this);}if(this.reversed){_22d=_22d.slice(0).reverse();}var _22e=lang.isObject(_22d)&&!lang.isArrayLike(_22d);var _22f=[];if(_22e){for(var key in _22d){_22f.push(_22d[key]);}}else{_22f=_22d;}var _230=_229.forloop={parentloop:_229.get("forloop",{})};var j=0;for(i=0;i<_22f.length;i++){var item=_22f[i];_230.counter0=j;_230.counter=j+1;_230.revcounter0=_22f.length-j-1;_230.revcounter=_22f.length-j;_230.first=!j;_230.last=(j==_22f.length-1);if(_22c.length>1&&lang.isArrayLike(item)){if(!_22b){_22b=true;_229=_229.push();}var _231={};for(k=0;k<item.length&&k<_22c.length;k++){_231[_22c[k]]=item[k];}lang.mixin(_229,_231);}else{_229[_22c[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_22a));}_22a=this.pool[j++].render(_229,_22a,this);}delete _229.forloop;if(_22b){_229=_229.pop();}else{for(k=0;k<_22c.length;k++){delete _229[_22c[k]];}}return _22a;},unrender:function(_232,_233){for(var i=0,pool;pool=this.pool[i];i++){_233=pool.unrender(_232,_233);}return _233;},clone:function(_234){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_234));}});lang.mixin(ddtl,{if_:function(_235,_236){var i,part,type,_237=[],_238=_236.contents.split();_238.shift();_236=_238.join(" ");_238=_236.split(" and ");if(_238.length==1){type="or";_238=_236.split(" or ");}else{type="and";for(i=0;i<_238.length;i++){if(_238[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_238[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_237.push([not,new dd._Filter(part)]);}var _239=_235.parse(["else","endif"]);var _23a=false;var _236=_235.next_token();if(_236.contents=="else"){_23a=_235.parse(["endif"]);_235.next_token();}return new ddtl.IfNode(_237,_239,_23a,type);},_ifequal:function(_23b,_23c,_23d){var _23e=_23c.split_contents();if(_23e.length!=3){throw new Error(_23e[0]+" takes two arguments");}var end="end"+_23e[0];var _23f=_23b.parse(["else",end]);var _240=false;var _23c=_23b.next_token();if(_23c.contents=="else"){_240=_23b.parse([end]);_23b.next_token();}return new ddtl.IfEqualNode(_23e[1],_23e[2],_23f,_240,_23d);},ifequal:function(_241,_242){return ddtl._ifequal(_241,_242);},ifnotequal:function(_243,_244){return ddtl._ifequal(_243,_244,true);},for_:function(_245,_246){var _247=_246.contents.split();if(_247.length<4){throw new Error("'for' statements should have at least four words: "+_246.contents);}var _248=_247[_247.length-1]=="reversed";var _249=(_248)?-3:-2;if(_247[_247.length+_249]!="in"){throw new Error("'for' tag received an invalid argument: "+_246.contents);}var _24a=_247.slice(1,_249).join(" ").split(/ *, */);for(var i=0;i<_24a.length;i++){if(!_24a[i]||_24a[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_246.contents);}}var _24b=_245.parse(["endfor"]);_245.next_token();return new ddtl.ForNode(_24a,_247[_247.length+_249+1],_248,_24b);}});return dojox.dtl.tag.logic;});},"epi-packaging/SelectedFiles":function(){define(["dojo","dijit","dojox/form/uploader/FileList","dojo/text!./templates/SelectedFiles.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SelectedFiles"],function(dojo,_24c,_24d,_24e,res){return dojo.declare(_24d,{res:res,templateString:_24e,hideProgress:function(){},showProgress:function(){},reset:function(){this.inherited(arguments);this._changeListVisibility();},_progress:function(_24f){},_onUploaderChange:function(_250){this.inherited(arguments);this._changeListVisibility();},_changeListVisibility:function(){if(this.rowAmt==0){dojo.style(this.listContainer,"display","none");}else{dojo.style(this.listContainer,"display","block");}},_addRow:function(_251,type,name){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIndex");c.innerHTML=_251;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIcon");c.innerHTML=type;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderFileName");c.innerHTML=name;this.rowAmt++;}});});},"dojox/form/uploader/FileList":function(){define("dojox/form/uploader/FileList",["dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_base/manager","dojox/form/uploader/Base"],function(fx,_252,_253,_254,lang,_255,_256,_257){return _254("dojox.form.uploader.FileList",[_257],{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:"<div class=\"dojoxUploaderFileList\">"+"<div dojoAttachPoint=\"progressNode\" class=\"dojoxUploaderFileListProgress\"><div dojoAttachPoint=\"percentBarNode\" class=\"dojoxUploaderFileListProgressBar\"></div><div dojoAttachPoint=\"percentTextNode\" class=\"dojoxUploaderFileListPercentText\">0%</div></div>"+"<table class=\"dojoxUploaderFileListTable\">"+"<thead><tr class=\"dojoxUploaderFileListHeader\"><th class=\"dojoxUploaderIndex\">${headerIndex}</th><th class=\"dojoxUploaderIcon\">${headerType}</th><th class=\"dojoxUploaderFileName\">${headerFilename}</th><th class=\"dojoxUploaderFileSize\" dojoAttachPoint=\"sizeHeader\">${headerFilesize}</th></tr></thead>"+"<tbody class=\"dojoxUploaderFileListContent\" dojoAttachPoint=\"listNode\">"+"</tbody>"+"</table>"+"<div>",postCreate:function(){this.setUploader();this.hideProgress();},reset:function(){for(var i=0;i<this.rowAmt;i++){this.listNode.deleteRow(0);}this.rowAmt=0;},setUploader:function(){if(!this.uploaderId&&!this.uploader){}else{if(this.uploaderId&&!this.uploader){this.uploader=_256.byId(this.uploaderId);}else{if(this._upCheckCnt>4){return;}}}if(this.uploader){this.connect(this.uploader,"onChange","_onUploaderChange");this.connect(this.uploader,"reset","reset");this.connect(this.uploader,"onBegin",function(){this.showProgress(true);});this.connect(this.uploader,"onProgress","_progress");this.connect(this.uploader,"onComplete",function(){setTimeout(lang.hitch(this,function(){this.hideProgress(true);}),1250);});if(!(this._fileSizeAvail={"html5":1,"flash":1}[this.uploader.uploadType])){this.sizeHeader.style.display="none";}}else{this._upCheckCnt++;setTimeout(lang.hitch(this,"setUploader"),250);}},hideProgress:function(_258){var o=_258?{ani:true,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:false};this._hideShowProgress(o);},showProgress:function(_259){var o=_259?{ani:true,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:false};this._hideShowProgress(o);},_progress:function(_25a){this.percentTextNode.innerHTML=_25a.percent;_252.set(this.percentBarNode,"width",_25a.percent);},_hideShowProgress:function(o){var node=this.progressNode;var _25b=function(){_252.set(node,"display",o.endDisp);};if(o.ani){_252.set(node,"display","block");fx.animateProperty({node:node,properties:{height:{start:o.beg,end:o.end,units:"px"}},onEnd:_25b}).play();}else{_25b();}},_onUploaderChange:function(_25c){this.reset();_255.forEach(_25c,function(f,i){this._addRow(i+1,this.getFileType(f.name),f.name,f.size);},this);},_addRow:function(_25d,type,name,size){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);_253.add(c,"dojoxUploaderIndex");c.innerHTML=_25d;c=r.insertCell(-1);_253.add(c,"dojoxUploaderIcon");c.innerHTML=type;c=r.insertCell(-1);_253.add(c,"dojoxUploaderFileName");c.innerHTML=name;if(this._fileSizeAvail){c=r.insertCell(-1);_253.add(c,"dojoxUploaderSize");c.innerHTML=this.convertBytes(size).value;}this.rowAmt++;}});});},"url:epi-packaging/templates/SelectedFiles.htm":"<div class=\"dojoxUploaderFileList\" data-dojo-attach-point=\"listContainer\" style=\"display:none\">\r\n    <span>${res.fileslisttitle}</span>\r\n    <div data-dojo-attach-point=\"sizeHeader\" style=\"display:none;\"></div>\r\n    <table class=\"dojoxUploaderFileListTable epi-default\" data-dojo-attach-point=\"listTable\">\r\n        <thead>\r\n            <tr class=\"dojoxUploaderFileListHeader\">\r\n                <th class=\"dojoxUploaderIndex\">\r\n                    ${res.headerindex}\r\n                </th>\r\n                <th class=\"dojoxUploaderIcon\">\r\n                    ${res.headertype}\r\n                </th>\r\n                <th class=\"dojoxUploaderFileName\">\r\n                    ${res.headerfile}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-dojo-attach-point=\"listNode\"></tbody>\r\n    </table>\r\n</div>\r\n","dojox/form/uploader/plugins/IFrame":function(){define("dojox/form/uploader/plugins/IFrame",["dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/io/iframe","dojox/form/uploader/plugins/HTML5"],function(_25e,_25f,lang,_260,_261,_262){var _263=_25f("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||this.force=="iframe"){this.uploadType="iframe";this.upload=this.uploadIFrame;}},uploadIFrame:function(data){var form,_264=false;if(!this.getForm()){form=_25e.place("<form enctype=\"multipart/form-data\" method=\"post\"></form>",this.domNode);_260.forEach(this._inputs,function(n,i){if(n.value){form.appendChild(n);}},this);_264=true;}else{form=this.form;}var url=this.getUrl();var dfd=_261.send({url:url,form:form,handleAs:"json",content:data,method:"POST",error:lang.hitch(this,function(err){if(_264){_25e.destroy(form);}this.onError(err);}),load:lang.hitch(this,function(data,_265,_266){if(_264){_25e.destroy(form);}if(data["ERROR"]||data["error"]){this.onError(data);}else{this.onComplete(data);}})});}});dojox.form.addUploaderPlugin(_263);return _263;});},"dojo/io/iframe":function(){define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_267,json,_268,lang,xhr,has,win,dom,_269,_26a,_26b,_26c,_26d){_268.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_26d._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _26e=lang.delegate(_26d,{create:function(){return _26e._frame=_26d.create.apply(_26d,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _26f=null,_270=dfd.ioArgs;try{var _271=_270.handleAs;if(_271==="xml"||_271==="html"){_26f=rDfd.response.data;}else{_26f=rDfd.response.text;if(_271==="json"){_26f=json.fromJson(_26f);}else{if(_271==="javascript"){_26f=_268.eval(_26f);}}}}catch(e){_26f=e;}return _26f;},function(_272,dfd){dfd.ioArgs._hasError=true;return _272;});var _273=dfd.ioArgs;var _274="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_274="POST";}var _275={method:_274,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_273};if(_275.method){_275.method=_275.method.toUpperCase();}if(_267.ioPublish&&_268.publish&&_273.args.ioPublish!==false){var _276=_26c.after(_26d,"_notifyStart",function(data){if(data.options.ioArgs===_273){_276.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_26d(_273.url,_275,true);_273._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_277){dfd.ioArgs.error=_277;dfd.reject(_277);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_26e);return _26e;});},"dojo/request/iframe":function(){define("dojo/request/iframe",["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_278,_279,_27a,util,_27b,lang,_27c,_27d,has,dom,_27e,win){var mid=_278.id.replace(/[\/\.\-]/g,"_"),_27f=mid+"_onload";if(!win.global[_27f]){win.global[_27f]=function(){var dfd=_280._currentDfd;if(!dfd){_280._fireNextRequest();return;}var _281=dfd.response,_282=_281.options,_283=dom.byId(_282.form)||dfd._tmpForm;if(_283){var _284=dfd._contentToClean;for(var i=0;i<_284.length;i++){var key=_284[i];for(var j=0;j<_283.childNodes.length;j++){var _285=_283.childNodes[j];if(_285.name===key){_27e.destroy(_285);break;}}}dfd._originalAction&&_283.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_283.setAttribute("method",dfd._originalMethod);_283.method=dfd._originalMethod;}if(dfd._originalTarget){_283.setAttribute("target",dfd._originalTarget);_283.target=dfd._originalTarget;}}if(dfd._tmpForm){_27e.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _286(name,_287,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){}uri=(has("config-dojoBlankHtmlUrl")||_279.toUrl("dojo/resources/blank.html"));}var _288=_27e.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_287+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_288;return _288;};function _289(_28a,src,_28b){var _28c=win.global.frames[_28a.name];if(_28c.contentWindow){_28c=_28c.contentWindow;}try{if(!_28b){_28c.location=src;}else{_28c.location.replace(src);}}catch(e){}};function doc(_28d){if(_28d.contentDocument){return _28d.contentDocument;}var name=_28d.name;if(name){var _28e=win.doc.getElementsByTagName("iframe");if(_28d.document&&_28e[name].contentWindow&&_28e[name].contentWindow.document){return _28e[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _28f(){return _27e.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _290(){var dfd;try{if(_280._currentDfd||!_280._dfdQueue.length){return;}do{dfd=_280._currentDfd=_280._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_280._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_280._currentDfd=null;return;}var _291=dfd.response,_292=_291.options,c2c=dfd._contentToClean=[],_293=dom.byId(_292.form),_294=util.notify,data=_292.data||null,_295;if(!dfd._legacy&&_292.method==="POST"&&!_293){_293=dfd._tmpForm=_28f();}else{if(_292.method==="GET"&&_293&&_291.url.indexOf("?")>-1){_295=_291.url.slice(_291.url.indexOf("?")+1);data=lang.mixin(_27c.queryToObject(_295),data);}}if(_293){if(!dfd._legacy){var _296=_293;do{_296=_296.parentNode;}while(_296!==win.doc.documentElement);if(!_296){_293.style.position="absolute";_293.style.left="-1000px";_293.style.top="-1000px";win.body().appendChild(_293);}if(!_293.name){_293.name=mid+"_form";}}if(data){var _297=function(name,_298){_27e.create("input",{type:"hidden",name:name,value:_298},_293);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_297(x,val[i]);}}else{if(!_293[x]){_297(x,val);}else{_293[x].value=val;}}}}var _299=_293.getAttributeNode("action"),_29a=_293.getAttributeNode("method"),_29b=_293.getAttributeNode("target");if(_291.url){dfd._originalAction=_299?_299.value:null;if(_299){_299.value=_291.url;}else{_293.setAttribute("action",_291.url);}}if(!dfd._legacy){dfd._originalMethod=_29a?_29a.value:null;if(_29a){_29a.value=_292.method;}else{_293.setAttribute("method",_292.method);}}else{if(!_29a||!_29a.value){if(mthdNode){mthdNode.value=_292.method;}else{fn.setAttribute("method",_292.method);}}}dfd._originalTarget=_29b?_29b.value:null;if(_29b){_29b.value=_280._iframeName;}else{_293.setAttribute("target",_280._iframeName);}_293.target=_280._iframeName;_294&&_294.emit("send",_291,dfd.promise.cancel);_280._notifyStart(_291);_293.submit();}else{var _29c="";if(_291.options.data){_29c=_291.options.data;if(typeof _29c!=="string"){_29c=_27c.objectToQuery(_29c);}}var _29d=_291.url+(_291.url.indexOf("?")>-1?"&":"?")+_29c;_294&&_294.emit("send",_291,dfd.promise.cancel);_280._notifyStart(_291);_280.setSrc(_280._frame,_29d,true);}}catch(e){dfd.reject(e);}};function _29e(_29f){return !this.isFulfilled();};function _2a0(_2a1){return !!this._finished;};function _2a2(_2a3,_2a4){if(!_2a4){try{var _2a5=_2a3.options,doc=_280.doc(_280._frame),_2a6=_2a5.handleAs;if(_2a6!=="html"){if(_2a6==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_27d("a",doc.documentElement).orphan();var _2a7=doc.documentElement.innerText;_2a7=_2a7.replace(/>\s+</g,"><");_2a3.text=lang.trim(_2a7);}else{_2a3.data=doc;}}else{_2a3.text=doc.getElementsByTagName("textarea")[0].value;}_27b(_2a3);}else{_2a3.data=doc;}}catch(e){_2a4=e;}}if(_2a4){this.reject(_2a4);}else{if(this._finished){this.resolve(_2a3);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_2a8){this._callNext();};var _2a9={method:"POST"};function _280(url,_2aa,_2ab){var _2ac=util.parseArgs(url,util.deepCreate(_2a9,_2aa),true);url=_2ac.url;_2aa=_2ac.options;if(_2aa.method!=="GET"&&_2aa.method!=="POST"){throw new Error(_2aa.method+" not supported by dojo/request/iframe");}if(!_280._frame){_280._frame=_280.create(_280._iframeName,_27f+"();");}var dfd=util.deferred(_2ac,null,_29e,_2a0,_2a2,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_280._currentDfd=null;_280._fireNextRequest();}};dfd._legacy=_2ab;_280._dfdQueue.push(dfd);_280._fireNextRequest();_27a(dfd);return _2ab?dfd:dfd.promise;};_280.create=_286;_280.doc=doc;_280.setSrc=_289;_280._iframeName=mid+"_IoIframe";_280._notifyStart=function(){};_280._dfdQueue=[];_280._currentDfd=null;_280._fireNextRequest=_290;util.addCommonMethods(_280,["GET","POST"]);return _280;});},"url:epi-packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n","epi-packaging/RootContainer":function(){define(["epi","dojo","dijit","dijit/layout/BorderContainer","epi-packaging/AntiForgeryData","epi-packaging/Toolbar","epi-packaging/NavigationMenu","epi/shell/widget/WidgetSwitcher","dijit/layout/ContentPane"],function(epi,dojo,_2ad,_2ae,_2af,_2b0,_2b1,_2b2,_2b3){return dojo.declare([_2ae],{_antiForgeryData:null,startup:function(){if(this._started){return;}this._antiForgeryData=new _2af(this.antiForgeryToken);var _2b4=new _2b0();var _2b5=new _2b3({region:"top",content:_2b4});this.addChild(_2b5);var _2b6=new _2b1({antiForgeryData:this._antiForgeryData});var _2b7=new _2b3({region:"left",content:_2b6,style:"width: 17em"});this.addChild(_2b7);var _2b8=new _2b2({componentConstructorArgs:{antiForgeryData:this._antiForgeryData},supportedContextTypes:[]});var _2b9=new _2b3({region:"center",content:_2b8});this.addChild(_2b9);this.inherited(arguments);}});});},"epi-packaging/Toolbar":function(){define(["dojo/_base/declare","dojo/topic","dijit/layout/ContentPane","epi/shell/widget/ToolbarSet","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Toolbar"],function(_2ba,_2bb,_2bc,_2bd,res){return _2ba([_2bd],{res:res,constructor:function(){this.layoutContainerClass=_2bc;},postCreate:function(){this.add([{name:"upload",label:this.res.uploadbuttonlabel,action:function(){_2bb.publish("/epi/shell/action/changeview","epi-packaging/UploadSection");}},{name:"restartWarning",widgetType:"epi-packaging/SiteRestartWarning"}]);this.inherited(arguments);},destroy:function(){this.inherited(arguments);}});});},"epi-packaging/SiteRestartWarning":function(){define(["dojo","dijit","epi/dependency","dijit/_Widget","dijit/_TemplatedMixin","dojo/text!./templates/SiteRestartWarning.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SiteRestartWarning"],function(dojo,_2be,_2bf,_2c0,_2c1,_2c2,res){return dojo.declare([_2c0,_2c1],{res:res,helpUrl:null,templateString:_2c2,postMixInProperties:function(){var _2c3=_2bf.resolve("epi.ModuleManager");var _2c4=_2c3.getModule("CMS");this.helpUrl=_2c4.helpPath+"#Add-ons/SS_Add-ons.htm";this.inherited(arguments);}});});},"url:epi-packaging/templates/SiteRestartWarning.htm":"<div class=\"epi-addonsRestartWarningContainer dijitInline\">\r\n    <span class=\"epi-addonsRestartWarningMessage\">${res.message} <a class=\"epi-visibleLink\" href=\"${helpUrl}\" onclick=\"window.open('${helpUrl}','_blank', 'scrollbars=yes, location=no, menubar=no, resizable=yes, toolbar=no, height=500, width=840');return false;\" target=\"_blank\"  >${res.learnmorelabel}</a></span>\r\n</div>","epi-packaging/UpdateableSection":function(){define(["dojo","dijit","epi/routes","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi-packaging/SectionHeader","epi-packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UpdateableSection"],function(dojo,_2c5,_2c6,_2c7,_2c8,_2c9,_2ca,_2cb,res){return dojo.declare([_2c7,_2c8],{res:res,templateString:_2cb,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _2c9({webHelpAlias:"updateableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _2ca({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:true,emptyListMessage:this.res.emptylistmessage,listingUrl:_2c6.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetUpdateableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_2cc){this._headerWidget.addErrorMessages(_2cc);});this.connect(this._listWidget,"onSuccess",function(_2cd){this._headerWidget.addSuccessMessages(_2cd);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"epi-packaging/UploadSection":function(){define(["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi-packaging/SectionHeader","epi-packaging/PackageUpload","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(dojo,_2ce,_2cf,_2d0,_2d1,_2d2,_2d3,res){return dojo.declare([_2cf,_2d0],{res:res,templateString:_2d3,antiForgeryData:null,_headerWidget:null,_uploadWidget:null,_packageUpload:null,startup:function(){if(this._started){return;}this._headerWidget=new _2d1({webHelpAlias:"uploadaddon",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.uploadtitle},this._headerPlaceholder);this._headerWidget.startup();this._packageUpload=new _2d2({antiForgeryData:this.antiForgeryData},this._contentPlaceholder);this._packageUpload.startup();this.connect(this._packageUpload,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._packageUpload,"onError",function(_2d4){this._headerWidget.addErrorMessages(_2d4);});this.connect(this._packageUpload,"onSuccess",function(_2d5){this._headerWidget.addSuccessMessages(_2d5);});this.connect(this._packageUpload,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._packageUpload.updateView();this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();}});});}}});